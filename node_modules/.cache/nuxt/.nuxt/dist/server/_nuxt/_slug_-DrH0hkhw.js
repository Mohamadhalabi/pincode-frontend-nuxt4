import { _ as __nuxt_component_0 } from "./nuxt-link-DhHsLoL_.js";
import { _ as __nuxt_component_0$1 } from "./NuxtImg-ChoT4sHP.js";
import { defineComponent, ref, computed, withAsyncContext, watch, reactive, mergeProps, unref, withCtx, createTextVNode, toDisplayString, createBlock, openBlock, useSSRContext } from "vue";
import { ssrRenderAttrs, ssrRenderComponent, ssrInterpolate, ssrRenderAttr, ssrRenderList, ssrRenderClass, ssrIncludeBooleanAttr } from "vue/server-renderer";
import { e as useRequestEvent, f as useRoute, a as useI18n, b as useRuntimeConfig, u as useHead } from "../server.mjs";
import { u as useApi } from "./useApi-CfP7biv6.js";
import { u as useCart } from "./useCart-Djb1VdLO.js";
import { u as useAddedToast, a as useAsyncData, r as refreshNuxtData } from "./useAddedToast-DsLqa03q.js";
import { getRequestURL } from "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/h3/dist/index.mjs";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/defu/dist/defu.mjs";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/ofetch/dist/node.mjs";
import "#internal/nuxt/paths";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/hookable/dist/index.mjs";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/unctx/dist/index.mjs";
import "pinia";
import "vue-router";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/radix3/dist/index.mjs";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/klona/dist/index.mjs";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/nuxt/node_modules/cookie-es/dist/index.mjs";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/destr/dist/index.mjs";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/ohash/dist/index.mjs";
import "@vue/devtools-api";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/@unhead/vue/dist/index.mjs";
import "/Users/mohamadalhalabi/development/pincode-frontend-nuxt4/node_modules/perfect-debounce/dist/index.mjs";
function useRequestURL(opts) {
  {
    return getRequestURL(useRequestEvent(), opts);
  }
}
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "[slug]",
  __ssrInlineRender: true,
  async setup(__props) {
    let __temp, __restore;
    const route = useRoute();
    const { t, locale, locales } = useI18n();
    const { get } = useApi();
    useCart();
    useAddedToast();
    const qty = ref(1);
    const key = computed(() => String(route.params.slug || ""));
    const { data: pack, pending, error } = ([__temp, __restore] = withAsyncContext(() => useAsyncData(
      () => `pack:${key.value}:${locale.value}`,
      () => get(`/token-packs/${key.value}`),
      { server: true, immediate: true }
    )), __temp = await __temp, __restore(), __temp);
    watch(locale, () => {
      refreshNuxtData(`pack:${key.value}:${locale.value}`);
    });
    const packCategory = computed(
      () => pack.value?.category ?? (pack.value?.service_category_id ? { id: pack.value.service_category_id, name: t("product.category"), slug: void 0 } : null)
    );
    function unitPriceFor(qty2, p) {
      const q = Math.max(1, Number(qty2 || 1));
      const tiers = (p.pricing_tiers || []).slice().sort((a, b) => (a.min_qty || 1) - (b.min_qty || 1));
      for (const tr of tiers) {
        const max = tr.max_qty ?? Number.POSITIVE_INFINITY;
        if (q >= (tr.min_qty || 1) && q <= max) {
          return Number((tr.sale_price_usd ?? tr.price_usd) || 0);
        }
      }
      return Number((p.sale_price_usd ?? p.price_usd) || 0);
    }
    const effectivePrice = computed(() => pack.value ? unitPriceFor(qty.value, pack.value) : 0);
    const strikePrice = computed(() => {
      if (!pack.value) return 0;
      const q = Math.max(1, Number(qty.value || 1));
      const tiers = (pack.value.pricing_tiers || []).slice().sort((a, b) => (a.min_qty || 1) - (b.min_qty || 1));
      for (const tr of tiers) {
        const max = tr.max_qty ?? Number.POSITIVE_INFINITY;
        if (q >= (tr.min_qty || 1) && q <= max) {
          return Number(tr.sale_price_usd ? tr.price_usd : 0);
        }
      }
      return Number(pack.value.sale_price_usd ? pack.value.price_usd : 0);
    });
    const showStrike = computed(() => Number(strikePrice.value) > 0);
    const tabs = computed(() => [
      { key: "desc", label: t("common.description") || "Description" },
      { key: "faq", label: t("common.faq") || "FAQ" },
      { key: "contact", label: t("common.contactUs") || "Contact Us" }
    ]);
    const activeTab = ref("desc");
    const contact = reactive({ name: "", email: "", message: "" });
    const sending = ref(false);
    const sentOk = ref(false);
    const sendErr = ref(null);
    const errMsg = computed(() => {
      const e = error.value;
      return e?.statusMessage || e?.message || "";
    });
    const zoomOpen = ref(false);
    const related = ref([]);
    const relLoading = ref(false);
    const relTried = ref(false);
    ref(null);
    const config = useRuntimeConfig();
    const reqUrl = useRequestURL();
    const baseUrl = computed(() => {
      const fromEnv = config.public?.siteUrl;
      if (fromEnv) return String(fromEnv).replace(/\/+$/, "");
      if (reqUrl?.origin) return reqUrl.origin;
      return "";
    });
    const cleanText = (html) => (html ?? "").replace(/<[^>]+>/g, " ").replace(/\s+/g, " ").trim();
    const pagePath = computed(() => `/product/${pack.value?.slug ?? key.value}`);
    const canonicalUrl = computed(() => `${baseUrl.value}${pagePath.value}`);
    const seoTitle = computed(
      () => pack.value?.seo_title?.trim() || pack.value?.name || t("seo.title") || "PIN Code Product"
    );
    const seoDescription = computed(
      () => pack.value?.seo_description?.trim() || cleanText(pack.value?.description).slice(0, 160) || t("seo.description") || "Professional Kia / Hyundai PIN code service."
    );
    const seoImage = computed(() => {
      const img = pack.value?.image_url || config.public?.ogImage;
      if (!img) return void 0;
      return img.startsWith("http") ? img : `${baseUrl.value}${img}`;
    });
    const alternates = computed(() => {
      const slug = pack.value?.slug ?? key.value;
      const all = (locales.value || []).map((l) => l.code || l);
      const defaultCode = locales.value?.find?.((x) => x.default)?.code || all[0];
      return all.map((code) => {
        const prefix = code === defaultCode ? "" : `/${code}`;
        return { hreflang: code, href: `${baseUrl.value}${prefix}/product/${slug}` };
      });
    });
    useHead(() => {
      const title = seoTitle.value;
      const desc = seoDescription.value;
      const img = seoImage.value;
      const bcItems = [
        { "@type": "ListItem", position: 1, name: "Home", item: `${baseUrl.value}/` },
        { "@type": "ListItem", position: 2, name: t("nav.categories") || "Categories", item: `${baseUrl.value}/categories` }
      ];
      if (packCategory.value) {
        bcItems.push({
          "@type": "ListItem",
          position: 3,
          name: packCategory.value.name,
          item: `${baseUrl.value}/categories/${packCategory.value.slug ?? packCategory.value.id}`
        });
      }
      bcItems.push({
        "@type": "ListItem",
        position: bcItems.length + 1,
        name: pack.value?.name || "",
        item: canonicalUrl.value
      });
      const ldBreadcrumb = {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        itemListElement: bcItems
      };
      const price = Number(effectivePrice.value ?? pack.value?.price_usd ?? 0).toFixed(2);
      const availability = (pack.value?.stock_status ?? "instock") === "outofstock" ? "https://schema.org/OutOfStock" : "https://schema.org/InStock";
      const ldProduct = pack.value ? {
        "@context": "https://schema.org",
        "@type": "Product",
        name: pack.value.name,
        image: img ? [img] : void 0,
        description: cleanText(pack.value.description),
        category: packCategory.value?.name,
        sku: pack.value.sku || pack.value.slug || String(pack.value.id),
        brand: {
          "@type": "Brand",
          name: pack.value.brand_name || config.public?.siteName || "Brand"
        },
        offers: {
          "@type": "Offer",
          url: canonicalUrl.value,
          priceCurrency: "USD",
          price,
          availability,
          itemCondition: "https://schema.org/NewCondition"
        }
      } : null;
      return {
        title,
        link: [
          { rel: "canonical", href: canonicalUrl.value },
          ...alternates.value.map((a) => ({ rel: "alternate", hreflang: a.hreflang, href: a.href })),
          { rel: "alternate", hreflang: "x-default", href: canonicalUrl.value }
        ],
        meta: [
          { name: "description", content: desc },
          { name: "robots", content: "index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" },
          // OG
          { property: "og:title", content: title },
          { property: "og:description", content: desc },
          { property: "og:type", content: "product" },
          { property: "og:url", content: canonicalUrl.value },
          ...img ? [{ property: "og:image", content: img }] : [],
          ...img ? [{ property: "og:image:secure_url", content: img }] : [],
          { property: "og:locale", content: locale.value },
          ...config.public?.siteName ? [{ property: "og:site_name", content: config.public.siteName }] : [],
          // Twitter
          { name: "twitter:card", content: img ? "summary_large_image" : "summary" },
          { name: "twitter:title", content: title },
          { name: "twitter:description", content: desc },
          ...img ? [{ name: "twitter:image", content: img }] : []
        ],
        // JSON-LD scripts (sanitized fix)
        script: [
          {
            id: "ld-breadcrumb",
            type: "application/ld+json",
            innerHTML: JSON.stringify(ldBreadcrumb)
          },
          ...ldProduct ? [{
            id: "ld-product",
            type: "application/ld+json",
            innerHTML: JSON.stringify(ldProduct)
          }] : []
        ],
        __dangerouslyDisableSanitizersByTagID: {
          "ld-breadcrumb": ["innerHTML"],
          "ld-product": ["innerHTML"]
        }
      };
    });
    return (_ctx, _push, _parent, _attrs) => {
      const _component_NuxtLink = __nuxt_component_0;
      const _component_NuxtImg = __nuxt_component_0$1;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-8" }, _attrs))}>`);
      if (!unref(pending)) {
        _push(`<nav class="mb-4 sm:mb-6" aria-label="Breadcrumb"><ol class="flex flex-wrap items-center gap-1 text-sm text-gray-600"><li>`);
        _push(ssrRenderComponent(_component_NuxtLink, {
          to: "/",
          class: "hover:text-orange-600 hover:underline"
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`${ssrInterpolate(_ctx.$t("common.home") || "Home")}`);
            } else {
              return [
                createTextVNode(toDisplayString(_ctx.$t("common.home") || "Home"), 1)
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(`</li><li class="px-1 text-gray-400">/</li><li>`);
        _push(ssrRenderComponent(_component_NuxtLink, {
          to: "/categories",
          class: "hover:text-orange-600 hover:underline"
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`${ssrInterpolate(_ctx.$t("nav.categories") || "Categories")}`);
            } else {
              return [
                createTextVNode(toDisplayString(_ctx.$t("nav.categories") || "Categories"), 1)
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(`</li>`);
        if (unref(packCategory)) {
          _push(`<!--[--><li class="px-1 text-gray-400">/</li><li>`);
          _push(ssrRenderComponent(_component_NuxtLink, {
            to: `/categories/${unref(packCategory).slug ?? unref(packCategory).id}`,
            class: "hover:text-orange-600 hover:underline"
          }, {
            default: withCtx((_, _push2, _parent2, _scopeId) => {
              if (_push2) {
                _push2(`${ssrInterpolate(unref(packCategory).name)}`);
              } else {
                return [
                  createTextVNode(toDisplayString(unref(packCategory).name), 1)
                ];
              }
            }),
            _: 1
          }, _parent));
          _push(`</li><!--]-->`);
        } else {
          _push(`<!---->`);
        }
        _push(`<li class="px-1 text-gray-400">/</li><li class="text-gray-900 font-medium truncate max-w-[60%] sm:max-w-none">${ssrInterpolate(unref(pack)?.name)}</li></ol></nav>`);
      } else {
        _push(`<!---->`);
      }
      if (unref(pending)) {
        _push(`<div class="grid gap-6 md:gap-8 md:grid-cols-2"><div class="h-[320px] rounded-xl bg-gray-100 animate-pulse"></div><div class="space-y-4"><div class="h-10 w-4/5 bg-gray-100 rounded animate-pulse"></div><div class="h-6 w-2/5 bg-gray-100 rounded animate-pulse"></div><div class="h-12 w-40 bg-gray-100 rounded animate-pulse"></div><div class="h-24 bg-gray-100 rounded animate-pulse"></div></div></div>`);
      } else if (unref(errMsg)) {
        _push(`<div class="text-red-600 text-sm">${ssrInterpolate(unref(errMsg))}</div>`);
      } else if (unref(pack)) {
        _push(`<div class="grid gap-6 md:gap-8 md:grid-cols-2"><div><button type="button" class="block w-full text-left" aria-label="Open image">`);
        if (unref(pack).image_url) {
          _push(ssrRenderComponent(_component_NuxtImg, {
            src: unref(pack).image_url,
            format: "webp",
            modifiers: { fit: "contain", background: "white" },
            class: "w-full rounded-xl border bg-white p-3 hover:scale-[1.01] transition",
            alt: ""
          }, null, _parent));
        } else {
          _push(`<div class="w-full rounded-xl border bg-gray-50 grid place-items-center text-gray-400 h-64">${ssrInterpolate(_ctx.$t("common.noImage") || "No image")}</div>`);
        }
        _push(`</button></div><aside class="space-y-5 lg:space-y-6 lg:sticky lg:top-24 self-start"><header><h1 class="text-3xl sm:text-4xl font-extrabold leading-tight">${ssrInterpolate(unref(pack).name)}</h1><p class="mt-1 text-sm text-gray-600">${ssrInterpolate(unref(pack).tokens)} ${ssrInterpolate(_ctx.$t("tokens") || "tokens")}</p></header><div class="space-y-1">`);
        if (unref(showStrike)) {
          _push(`<div class="flex items-baseline gap-2"><span class="text-2xl sm:text-3xl font-black text-red-600 tracking-tight"> $${ssrInterpolate(Number(unref(effectivePrice)).toFixed(2))}</span><span class="text-lg text-gray-400 line-through"> $${ssrInterpolate(Number(unref(strikePrice)).toFixed(2))}</span></div>`);
        } else {
          _push(`<div class="text-2xl sm:text-3xl font-black text-red-600 tracking-tight"> $${ssrInterpolate(Number(unref(effectivePrice)).toFixed(2))}</div>`);
        }
        if (unref(pack)?.sku) {
          _push(`<p class="text-sm text-gray-500">SKU: ${ssrInterpolate(unref(pack).sku)}</p>`);
        } else {
          _push(`<!---->`);
        }
        _push(`</div>`);
        if (unref(packCategory)) {
          _push(`<div class="flex items-center gap-2 text-sm bg-orange-50 border border-orange-100 rounded-lg px-3 py-2 w-fit"><span class="text-gray-700 font-medium">${ssrInterpolate(_ctx.$t("product.category") || "Category")}:</span>`);
          _push(ssrRenderComponent(_component_NuxtLink, {
            to: `/categories/${unref(packCategory).slug ?? unref(packCategory).id}`,
            class: "text-orange-600 font-semibold hover:text-orange-700 hover:underline transition"
          }, {
            default: withCtx((_, _push2, _parent2, _scopeId) => {
              if (_push2) {
                _push2(`${ssrInterpolate(unref(packCategory).name)}`);
              } else {
                return [
                  createTextVNode(toDisplayString(unref(packCategory).name), 1)
                ];
              }
            }),
            _: 1
          }, _parent));
          _push(`</div>`);
        } else {
          _push(`<!---->`);
        }
        _push(`<div class="flex items-center gap-3"><div class="flex items-center border rounded-lg overflow-hidden"><button type="button" class="px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700"> – </button><input${ssrRenderAttr("value", unref(qty))} type="number" min="1" class="w-14 text-center border-x py-2 outline-none"><button type="button" class="px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700"> + </button></div><button class="btn">${ssrInterpolate(_ctx.$t("btn.addToCart") || "Add to Cart")}</button></div>`);
        if (unref(pack)?.pricing_tiers?.length) {
          _push(`<div class="border rounded-lg overflow-hidden"><div class="bg-gray-50 px-3 py-2 text-sm font-medium text-gray-700">${ssrInterpolate(_ctx.$t("product.bulkPricing") || "Bulk pricing")}</div><table class="w-full text-sm"><thead class="bg-gray-50 text-gray-600"><tr><th class="text-left px-3 py-2">${ssrInterpolate(_ctx.$t("common.quantity") || "Quantity")}</th><th class="text-right px-3 py-2">${ssrInterpolate(_ctx.$t("common.price") || "Price")}</th></tr></thead><tbody><!--[-->`);
          ssrRenderList(unref(pack).pricing_tiers, (r, i) => {
            _push(`<tr class="border-t"><td class="px-3 py-2">`);
            if (r.max_qty) {
              _push(`<span>${ssrInterpolate(r.min_qty)}–${ssrInterpolate(r.max_qty)}</span>`);
            } else {
              _push(`<span>${ssrInterpolate(r.min_qty)}+ </span>`);
            }
            _push(`</td><td class="px-3 py-2 text-right">`);
            if (r.sale_price_usd) {
              _push(`<!--[--><span class="text-red-600 font-semibold">$${ssrInterpolate(Number(r.sale_price_usd).toFixed(2))}</span><span class="text-gray-400 line-through ml-1">$${ssrInterpolate(Number(r.price_usd).toFixed(2))}</span><!--]-->`);
            } else {
              _push(`<span class="text-gray-900 font-semibold">$${ssrInterpolate(Number(r.price_usd).toFixed(2))}</span>`);
            }
            _push(`</td></tr>`);
          });
          _push(`<!--]--></tbody></table></div>`);
        } else {
          _push(`<!---->`);
        }
        _push(`</aside></div>`);
      } else {
        _push(`<!---->`);
      }
      if (unref(pack)) {
        _push(`<div class="mt-8 rounded-xl border bg-white shadow-sm"><div class="flex flex-wrap gap-2 border-b px-3 sm:px-6 pt-2 sm:pt-3"><!--[-->`);
        ssrRenderList(unref(tabs), (tab) => {
          _push(`<button type="button" class="${ssrRenderClass([unref(activeTab) === tab.key ? "bg-white border-b-2 border-orange-500 text-gray-900 font-medium -mb-px" : "text-gray-500 hover:text-gray-800", "px-3 sm:px-4 py-2 rounded-t-lg text-sm sm:text-base transition focus:outline-none focus:ring-2 focus:ring-orange-400"])}">${ssrInterpolate(tab.label)}</button>`);
        });
        _push(`<!--]--></div><div class="p-3 sm:p-6">`);
        if (unref(activeTab) === "desc") {
          _push(`<section>`);
          if (unref(pack).description) {
            _push(`<div class="prose max-w-none"><div>${unref(pack).description ?? ""}</div></div>`);
          } else {
            _push(`<p class="text-sm text-gray-500">${ssrInterpolate(_ctx.$t("common.noDescription") || "No description available.")}</p>`);
          }
          _push(`</section>`);
        } else if (unref(activeTab) === "faq") {
          _push(`<section>`);
          if (unref(pack).faq) {
            _push(`<div class="prose max-w-none">${unref(pack).faq ?? ""}</div>`);
          } else {
            _push(`<p class="text-sm text-gray-500">${ssrInterpolate(_ctx.$t("common.noFaq") || "No FAQ available.")}</p>`);
          }
          _push(`</section>`);
        } else {
          _push(`<section><form class="space-y-4 max-w-2xl"><div class="grid sm:grid-cols-2 gap-3"><div><label class="block text-sm mb-1">${ssrInterpolate(_ctx.$t("common.name") || "Name")}</label><input${ssrRenderAttr("value", unref(contact).name)} type="text" required class="w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400"></div><div><label class="block text-sm mb-1">${ssrInterpolate(_ctx.$t("common.email") || "Email")}</label><input${ssrRenderAttr("value", unref(contact).email)} type="email" required class="w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400"></div></div><div><label class="block text-sm mb-1">${ssrInterpolate(_ctx.$t("common.message") || "Message")}</label><textarea rows="6" required class="w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400"${ssrRenderAttr("placeholder", _ctx.$t("common.contactPlaceholder") || "How can we help?")}>${ssrInterpolate(unref(contact).message)}</textarea></div><button class="btn"${ssrIncludeBooleanAttr(unref(sending)) ? " disabled" : ""}>`);
          if (!unref(sending)) {
            _push(`<span>${ssrInterpolate(_ctx.$t("common.send") || "Send")}</span>`);
          } else {
            _push(`<span>${ssrInterpolate(_ctx.$t("common.sending") || "Sending…")}</span>`);
          }
          _push(`</button>`);
          if (unref(sentOk)) {
            _push(`<p class="text-green-600 text-sm mt-1">${ssrInterpolate(_ctx.$t("common.sentThanks") || "Thanks! We will reply shortly.")}</p>`);
          } else {
            _push(`<!---->`);
          }
          if (unref(sendErr)) {
            _push(`<p class="text-red-600 text-sm mt-1">${ssrInterpolate(unref(sendErr))}</p>`);
          } else {
            _push(`<!---->`);
          }
          _push(`</form></section>`);
        }
        _push(`</div></div>`);
      } else {
        _push(`<!---->`);
      }
      if (unref(pack)) {
        _push(`<section class="mt-10"><h2 class="text-lg sm:text-xl font-semibold mb-4">${ssrInterpolate(_ctx.$t("product.related") || "Related Token Packs")}</h2>`);
        if (unref(relLoading)) {
          _push(`<div class="grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4"><!--[-->`);
          ssrRenderList(8, (i) => {
            _push(`<div class="h-56 rounded-xl bg-gray-100 animate-pulse"></div>`);
          });
          _push(`<!--]--></div>`);
        } else if (unref(related).length) {
          _push(`<div class="grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4"><!--[-->`);
          ssrRenderList(unref(related), (r) => {
            _push(`<article class="bg-white rounded-xl border shadow-sm hover:shadow-md transition overflow-hidden">`);
            _push(ssrRenderComponent(_component_NuxtLink, {
              to: `/product/${r.slug}`,
              class: "block"
            }, {
              default: withCtx((_, _push2, _parent2, _scopeId) => {
                if (_push2) {
                  if (r.image_url) {
                    _push2(ssrRenderComponent(_component_NuxtImg, {
                      src: r.image_url,
                      format: "webp",
                      modifiers: { fit: "cover" },
                      class: "w-full bg-gray-100 aspect-[4/3]",
                      alt: ""
                    }, null, _parent2, _scopeId));
                  } else {
                    _push2(`<div class="w-full h-40 grid place-items-center text-gray-400 bg-gray-50"${_scopeId}>—</div>`);
                  }
                } else {
                  return [
                    r.image_url ? (openBlock(), createBlock(_component_NuxtImg, {
                      key: 0,
                      src: r.image_url,
                      format: "webp",
                      modifiers: { fit: "cover" },
                      class: "w-full bg-gray-100 aspect-[4/3]",
                      alt: ""
                    }, null, 8, ["src"])) : (openBlock(), createBlock("div", {
                      key: 1,
                      class: "w-full h-40 grid place-items-center text-gray-400 bg-gray-50"
                    }, "—"))
                  ];
                }
              }),
              _: 2
            }, _parent));
            _push(`<div class="p-3 space-y-1">`);
            _push(ssrRenderComponent(_component_NuxtLink, {
              to: `/product/${r.slug}`,
              class: "block font-medium leading-5 hover:underline line-clamp-2"
            }, {
              default: withCtx((_, _push2, _parent2, _scopeId) => {
                if (_push2) {
                  _push2(`${ssrInterpolate(r.name)}`);
                } else {
                  return [
                    createTextVNode(toDisplayString(r.name), 1)
                  ];
                }
              }),
              _: 2
            }, _parent));
            _push(`<div class="text-lg sm:text-xl font-semibold">`);
            if (r.sale_price_usd && !r.pricing_tiers?.length) {
              _push(`<!--[--><span class="text-red-700">$${ssrInterpolate(Number(r.sale_price_usd).toFixed(2))}</span><span class="text-gray-400 line-through ml-1">$${ssrInterpolate(Number(r.price_usd).toFixed(2))}</span><!--]-->`);
            } else {
              _push(`<span class="text-red-700">$${ssrInterpolate(Number(r.price_usd).toFixed(2))}</span>`);
            }
            _push(`</div><button class="btn btn-sm w-full mt-1">${ssrInterpolate(_ctx.$t("btn.addToCart") || "Add to Cart")}</button></div></article>`);
          });
          _push(`<!--]--></div>`);
        } else if (unref(relTried)) {
          _push(`<p class="text-sm text-gray-500">${ssrInterpolate(_ctx.$t("product.noRelated") || "No related packs.")}</p>`);
        } else {
          _push(`<!---->`);
        }
        _push(`</section>`);
      } else {
        _push(`<!---->`);
      }
      if (unref(zoomOpen) && unref(pack)?.image_url) {
        _push(`<div class="fixed inset-0 bg-black/70 z-50 grid place-items-center p-4"><button class="absolute top-4 right-4 text-white text-2xl">✕</button>`);
        _push(ssrRenderComponent(_component_NuxtImg, {
          src: unref(pack).image_url,
          format: "webp",
          class: "w-full lg:w-1/2 rounded-lg max-w-[600px]",
          alt: ""
        }, null, _parent));
        _push(`</div>`);
      } else {
        _push(`<!---->`);
      }
      _push(`</div>`);
    };
  }
});
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("pages/product/[slug].vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
export {
  _sfc_main as default
};
//# sourceMappingURL=_slug_-DrH0hkhw.js.map
