{"version":3,"file":"useApi-CfP7biv6.js","sources":["../../../../../../../composables/useApi.ts"],"sourcesContent":["import type { $Fetch } from 'ofetch'\nimport { $fetch } from 'ofetch'\n\nexport const useApi = () => {\n  const config = useRuntimeConfig()\n  const { locale } = useI18n()\n\n  const client: $Fetch = $fetch.create({\n    baseURL: config.public.apiBase, // e.g. '/api' via proxy\n    headers: { Accept: 'application/json' },\n    retry: 1,\n    onResponseError(ctx) {\n      console.error('[API ERROR]', ctx.response.status, ctx.request, ctx.response._data)\n    }\n  })\n\n  const get = <T=any>(url: string, opts: any = {}) => {\n    const q = { ...(opts.query || {}), lang: locale.value }\n    return client<T>(url, { method: 'GET', ...opts, query: q })\n  }\n\n  return { get, client }\n}\n"],"names":[],"mappings":";;AAGO,MAAM,SAAS,MAAM;AAC1B,QAAM,SAAS,iBAAA;AACf,QAAM,EAAE,OAAA,IAAW,QAAA;AAEnB,QAAM,SAAiB,OAAO,OAAO;AAAA,IACnC,SAAS,OAAO,OAAO;AAAA;AAAA,IACvB,SAAS,EAAE,QAAQ,mBAAA;AAAA,IACnB,OAAO;AAAA,IACP,gBAAgB,KAAK;AACnB,cAAQ,MAAM,eAAe,IAAI,SAAS,QAAQ,IAAI,SAAS,IAAI,SAAS,KAAK;AAAA,IACnF;AAAA,EAAA,CACD;AAED,QAAM,MAAM,CAAQ,KAAa,OAAY,CAAA,MAAO;AAClD,UAAM,IAAI,EAAE,GAAI,KAAK,SAAS,CAAA,GAAK,MAAM,OAAO,MAAA;AAChD,WAAO,OAAU,KAAK,EAAE,QAAQ,OAAO,GAAG,MAAM,OAAO,GAAG;AAAA,EAC5D;AAEA,SAAO,EAAE,KAAK,OAAA;AAChB;"}