{"version":3,"file":"new-Cmr6XJcD.js","sources":["../../../../../../../pages/lookups/new.vue"],"sourcesContent":["\n<template>\n  <div class=\"max-w-2xl mx-auto space-y-6\">\n    <h1 class=\"text-xl font-semibold\">New VIN Lookup</h1>\n    <div class=\"card p-5 space-y-4\">\n      <div>\n        <label class=\"label\">Category</label>\n        <select v-model=\"categoryId\" class=\"input\">\n          <option disabled value=\"\">Select a category…</option>\n          <option v-for=\"c in categories\" :key=\"c.id\" :value=\"c.id\">\n            {{ c.name }} ({{ c.cost_tokens }} tokens)\n          </option>\n        </select>\n      </div>\n\n      <div v-if=\"current\">\n        <label class=\"label\">Inputs</label>\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n          <div v-for=\"k in (current.required_inputs || [])\" :key=\"k\">\n            <input :placeholder=\"k\" v-model=\"payload[k]\" class=\"input\" />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"flex items-center gap-3\">\n        <label class=\"label\">Dedupe key (optional)</label>\n        <input v-model=\"dedupeKey\" class=\"input\" placeholder=\"e.g., VIN-XXXX\" />\n      </div>\n\n      <button class=\"btn w-full\" :disabled=\"!categoryId || loading\" @click=\"submit\">\n        <span v-if=\"!loading\">Submit Lookup</span>\n        <span v-else>Submitting…</span>\n      </button>\n    </div>\n  </div>\n</template>\n<script setup lang=\"ts\">\nconst { $get, $post } = useApi()\nconst categories = ref<any[]>([])\nconst categoryId = ref<any>('')\nconst payload = reactive<Record<string, any>>({})\nconst dedupeKey = ref('')\nconst loading = ref(false)\n\nonMounted(async () => {\n  const res:any = await $get('/service-categories?active=1')\n  categories.value = res.data || res\n})\n\nconst current = computed(() => categories.value.find((c:any) => c.id == categoryId.value))\n\nconst submit = async () => {\n  loading.value = true\n  try {\n    const body = {\n      service_category_id: Number(categoryId.value),\n      input_payload: payload,\n      dedupe_key: dedupeKey.value || null\n    }\n    await $post('/vin-lookups', body)\n    await navigateTo('/lookups')\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrRenderList","_ssrInterpolate","_ssrRenderAttr","_ssrIncludeBooleanAttr"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAqCwB,WAAA;AACxB,UAAM,aAAa,IAAW,EAAE;AAChC,UAAM,aAAa,IAAS,EAAE;AAC9B,UAAM,UAAU,SAA8B,EAAE;AAChD,UAAM,YAAY,IAAI,EAAE;AACxB,UAAM,UAAU,IAAI,KAAK;AAOzB,UAAM,UAAU,SAAS,MAAM,WAAW,MAAM,KAAK,CAAC,MAAU,EAAE,MAAM,WAAW,KAAK,CAAC;;mBA/ClFA,eAAAC,WAAA,EAAA,OAAM,8BAAA,GAA6B,MAAA,CAAA,uNAKjBC,MAAA,UAAA,CAAU,oBAAVA,MAAA,UAAA,GAAU,EAAA,kBAAVA,MAAA,UAAA,GAAU,EAAA,CAAA,IAAA,cAAA;AAELC,oBAAAD,MAAA,UAAA,IAAL,MAAC;sCAA6B,SAAO,EAAE,EAAE,wCAFzCA,MAAA,UAAA,CAAU,oBAAVA,MAAA,UAAA,GAEqC,EAAE,EAAE,kBAFzCA,MAAA,UAAA,GAEqC,EAAE,EAAE,CAAA,IAAA,cAAA,MACnDE,eAAA,EAAE,IAAI,MAAQA,eAAA,EAAE,WAAW;;;UAKzBF,MAAA,OAAA,GAAO;;sBAGIA,MAAA,OAAA,EAAQ,mBAAe,CAAA,GAAA,CAA7B,MAAC;8BACHG,cAAA,eAAa,CAAC,IAAWA,cAAA,SAAAH,MAAA,OAAA,EAAQ,CAAC,CAAA;;;;;;mIAO9BA,MAAA,SAAA,CAAS,gFAGYI,sBAAA,CAAAJ,MAAA,UAAA,KAAcA,MAAA,OAAA,CAAO,IAAA,cAAA;WAC7CA,MAAA,OAAA,GAAO;;;;;;;;;;;;;;;"}