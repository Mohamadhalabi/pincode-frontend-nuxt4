import{_ as be}from"./Dgi673JG.js";import{_ as xe}from"./CV0r2NXO.js";import{i as he,L as ke,e as we,k as v,f as d,s as $e,x as Ne,q as qe,l as Ce,u as Te,c as i,m as g,h as o,a as s,b,w as k,F as x,t as r,D as Ie,n as ee,z as P,A as U,J as Se,r as H,p as te,g as Le,o as l,d as q,y as Fe}from"./ClNtL1l2.js";import{u as Me}from"./BKRRKjx3.js";import{u as Pe}from"./C8iguzjs.js";import{u as Ue,a as He,r as Oe}from"./B0LqZtKm.js";function Be(se){return new URL(globalThis.location.href)}const De={class:"max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-8"},Ve={key:0,class:"mb-4 sm:mb-6","aria-label":"Breadcrumb"},Ae={class:"flex flex-wrap items-center gap-1 text-sm text-gray-600"},Re={class:"text-gray-900 font-medium truncate max-w-[60%] sm:max-w-none"},Ee={key:1,class:"grid gap-6 md:gap-8 md:grid-cols-2"},ze={key:2,class:"text-red-600 text-sm"},Je={key:3,class:"grid gap-6 md:gap-8 md:grid-cols-2"},Qe={key:1,class:"w-full rounded-xl border bg-gray-50 grid place-items-center text-gray-400 h-64"},je={class:"space-y-5 lg:space-y-6 lg:sticky lg:top-24 self-start"},Ke={class:"text-3xl sm:text-4xl font-extrabold leading-tight"},We={class:"mt-1 text-sm text-gray-600"},Ye={class:"space-y-1"},Ge={key:0,class:"flex items-baseline gap-2"},Xe={class:"text-2xl sm:text-3xl font-black text-red-600 tracking-tight"},Ze={class:"text-lg text-gray-400 line-through"},et={key:1,class:"text-2xl sm:text-3xl font-black text-red-600 tracking-tight"},tt={key:2,class:"text-sm text-gray-500"},st={key:0,class:"flex items-center gap-2 text-sm bg-orange-50 border border-orange-100 rounded-lg px-3 py-2 w-fit"},ot={class:"text-gray-700 font-medium"},at={class:"flex items-center gap-3"},nt={class:"flex items-center border rounded-lg overflow-hidden"},lt={key:1,class:"border rounded-lg overflow-hidden"},it={class:"bg-gray-50 px-3 py-2 text-sm font-medium text-gray-700"},rt={class:"w-full text-sm"},ct={class:"bg-gray-50 text-gray-600"},ut={class:"text-left px-3 py-2"},dt={class:"text-right px-3 py-2"},mt={class:"px-3 py-2"},gt={key:0},pt={key:1},_t={class:"px-3 py-2 text-right"},vt={class:"text-red-600 font-semibold"},yt={class:"text-gray-400 line-through ml-1"},ft={key:1,class:"text-gray-900 font-semibold"},bt={key:4,class:"mt-8 rounded-xl border bg-white shadow-sm"},xt={class:"flex flex-wrap gap-2 border-b px-3 sm:px-6 pt-2 sm:pt-3"},ht=["onClick"],kt={class:"p-3 sm:p-6"},wt={key:0},$t={key:0,class:"prose max-w-none"},Nt=["innerHTML"],qt={key:1,class:"text-sm text-gray-500"},Ct={key:1},Tt=["innerHTML"],It={key:1,class:"text-sm text-gray-500"},St={key:2},Lt={class:"grid sm:grid-cols-2 gap-3"},Ft={class:"block text-sm mb-1"},Mt={class:"block text-sm mb-1"},Pt={class:"block text-sm mb-1"},Ut=["placeholder"],Ht=["disabled"],Ot={key:0},Bt={key:1},Dt={key:0,class:"text-green-600 text-sm mt-1"},Vt={key:1,class:"text-red-600 text-sm mt-1"},At={class:"text-lg sm:text-xl font-semibold mb-4"},Rt={key:0,class:"grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4"},Et={key:1,class:"grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4"},zt={key:1,class:"w-full h-40 grid place-items-center text-gray-400 bg-gray-50"},Jt={class:"p-3 space-y-1"},Qt={class:"text-lg sm:text-xl font-semibold"},jt={class:"text-red-700"},Kt={class:"text-gray-400 line-through ml-1"},Wt={key:1,class:"text-red-700"},Yt=["onClick"],Gt={key:2,class:"text-sm text-gray-500"},as=he({__name:"[slug]",async setup(se){let C,z;const oe=ke(),{t:f,locale:T,locales:J}=we(),{get:O,client:ae}=Me(),Q=Pe(),{show:ne}=Ue(),p=v(1),w=d(()=>String(oe.params.slug||"")),{data:t,pending:j,error:le}=([C,z]=$e(()=>He(()=>`pack:${w.value}:${T.value}`,()=>O(`/token-packs/${w.value}`),{server:!0,immediate:!0})),C=await C,z(),C);Ne(T,()=>{Oe(`pack:${w.value}:${T.value}`)});const m=d(()=>t.value?.category??(t.value?.service_category_id?{id:t.value.service_category_id,name:f("product.category"),slug:void 0}:null));function B(e,a){const c=Math.max(1,Number(e||1)),u=(a.pricing_tiers||[]).slice().sort((n,y)=>(n.min_qty||1)-(y.min_qty||1));for(const n of u){const y=n.max_qty??Number.POSITIVE_INFINITY;if(c>=(n.min_qty||1)&&c<=y)return Number((n.sale_price_usd??n.price_usd)||0)}return Number((a.sale_price_usd??a.price_usd)||0)}const D=d(()=>t.value?B(p.value,t.value):0),K=d(()=>{if(!t.value)return 0;const e=Math.max(1,Number(p.value||1)),a=(t.value.pricing_tiers||[]).slice().sort((c,u)=>(c.min_qty||1)-(u.min_qty||1));for(const c of a){const u=c.max_qty??Number.POSITIVE_INFINITY;if(e>=(c.min_qty||1)&&e<=u)return Number(c.sale_price_usd?c.price_usd:0)}return Number(t.value.sale_price_usd?t.value.price_usd:0)}),ie=d(()=>Number(K.value)>0);function re(){if(!t.value)return;const e=Math.max(1,Number(p.value||1)),a=B(e,t.value);Q.add({product_id:t.value.id,product_type:"token-pack",slug:t.value.slug||String(t.value.id),sku:t.value.sku||t.value.slug||String(t.value.id),name:t.value.name,price:a,qty:e,image:t.value.image_url||null,meta:{tokens:t.value.tokens,base_price_usd:Number(t.value.price_usd||0),sale_price_usd:t.value.sale_price_usd?Number(t.value.sale_price_usd):null,pricing_tiers:t.value.pricing_tiers||null}}),ne({img:t.value.image_url||null,title:t.value.name,sku:t.value.sku||t.value.slug||String(t.value.id)})}function ce(e){const a=B(1,e);Q.add({product_id:e.id,product_type:"token-pack",slug:e.slug||String(e.id),sku:e.sku||e.slug||String(e.id),name:e.name,price:a,qty:1,image:e.image_url||null,meta:{tokens:e.tokens,base_price_usd:Number(e.price_usd||0),sale_price_usd:e.sale_price_usd?Number(e.sale_price_usd):null,pricing_tiers:e.pricing_tiers||null}})}const ue=d(()=>[{key:"desc",label:f("common.description")||"Description"},{key:"faq",label:f("common.faq")||"FAQ"},{key:"contact",label:f("common.contactUs")||"Contact Us"}]),I=v("desc"),_=qe({name:"",email:"",message:""}),S=v(!1),V=v(!1),L=v(null);async function de(){if(t.value){S.value=!0,V.value=!1,L.value=null;try{await ae("/contact",{method:"POST",body:{name:_.name,email:_.email,message:_.message,product_id:t.value.id,product_slug:t.value.slug}}),V.value=!0,_.message=""}catch(e){L.value=e?.data?.message||e?.message||"Failed to send."}finally{S.value=!1}}}const W=d(()=>{const e=le.value;return e?.statusMessage||e?.message||""}),F=v(!1),A=v([]),M=v(!1),R=v(!1),E=v(null);async function me(){if(M.value||R.value||!t.value)return;M.value=!0,R.value=!0;const e=t.value.category?.id??t.value.service_category_id??null;try{let a=[];e&&(a=await O("/token-packs",{query:{category_id:e,exclude:t.value.id,limit:12}})),a?.length||(a=(await O("/token-packs")||[]).filter(u=>u.id!==t.value.id&&(u.service_category_id&&u.service_category_id===e||u.category?.id===e)).slice(0,12)),A.value=a}catch{}finally{M.value=!1}}Ce(()=>{if(!E.value)return;const e=new IntersectionObserver(a=>{a.some(c=>c.isIntersecting)&&(me(),e.disconnect())},{rootMargin:"200px"});e.observe(E.value)});const $=Le(),Y=Be(),h=d(()=>{const e=$.public?.siteUrl;return e?String(e).replace(/\/+$/,""):Y?.origin?Y.origin:window?.location?.origin?window.location.origin:""}),G=e=>(e??"").replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim(),ge=d(()=>`/product/${t.value?.slug??w.value}`),N=d(()=>`${h.value}${ge.value}`),pe=d(()=>t.value?.seo_title?.trim()||t.value?.name||f("seo.title")||"PIN Code Product"),_e=d(()=>t.value?.seo_description?.trim()||G(t.value?.description).slice(0,160)||f("seo.description")||"Professional Kia / Hyundai PIN code service."),ve=d(()=>{const e=t.value?.image_url||$.public?.ogImage;if(e)return e.startsWith("http")?e:`${h.value}${e}`}),ye=d(()=>{const e=t.value?.slug??w.value,a=(J.value||[]).map(u=>u.code||u),c=J.value?.find?.(u=>u.default)?.code||a[0];return a.map(u=>{const n=u===c?"":`/${u}`;return{hreflang:u,href:`${h.value}${n}/product/${e}`}})});return Te(()=>{const e=pe.value,a=_e.value,c=ve.value,u=[{"@type":"ListItem",position:1,name:"Home",item:`${h.value}/`},{"@type":"ListItem",position:2,name:f("nav.categories")||"Categories",item:`${h.value}/categories`}];m.value&&u.push({"@type":"ListItem",position:3,name:m.value.name,item:`${h.value}/categories/${m.value.slug??m.value.id}`}),u.push({"@type":"ListItem",position:u.length+1,name:t.value?.name||"",item:N.value});const n={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:u},y=Number(D.value??t.value?.price_usd??0).toFixed(2),fe=(t.value?.stock_status??"instock")==="outofstock"?"https://schema.org/OutOfStock":"https://schema.org/InStock",X=t.value?{"@context":"https://schema.org","@type":"Product",name:t.value.name,image:c?[c]:void 0,description:G(t.value.description),category:m.value?.name,sku:t.value.sku||t.value.slug||String(t.value.id),brand:{"@type":"Brand",name:t.value.brand_name||$.public?.siteName||"Brand"},offers:{"@type":"Offer",url:N.value,priceCurrency:"USD",price:y,availability:fe,itemCondition:"https://schema.org/NewCondition"}}:null;return{title:e,link:[{rel:"canonical",href:N.value},...ye.value.map(Z=>({rel:"alternate",hreflang:Z.hreflang,href:Z.href})),{rel:"alternate",hreflang:"x-default",href:N.value}],meta:[{name:"description",content:a},{name:"robots",content:"index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1"},{property:"og:title",content:e},{property:"og:description",content:a},{property:"og:type",content:"product"},{property:"og:url",content:N.value},...c?[{property:"og:image",content:c}]:[],...c?[{property:"og:image:secure_url",content:c}]:[],{property:"og:locale",content:T.value},...$.public?.siteName?[{property:"og:site_name",content:$.public.siteName}]:[],{name:"twitter:card",content:c?"summary_large_image":"summary"},{name:"twitter:title",content:e},{name:"twitter:description",content:a},...c?[{name:"twitter:image",content:c}]:[]],script:[{id:"ld-breadcrumb",type:"application/ld+json",innerHTML:JSON.stringify(n)},...X?[{id:"ld-product",type:"application/ld+json",innerHTML:JSON.stringify(X)}]:[]],__dangerouslyDisableSanitizersByTagID:{"ld-breadcrumb":["innerHTML"],"ld-product":["innerHTML"]}}}),(e,a)=>{const c=be,u=xe;return l(),i("div",De,[o(j)?g("",!0):(l(),i("nav",Ve,[s("ol",Ae,[s("li",null,[b(c,{to:"/",class:"hover:text-orange-600 hover:underline"},{default:k(()=>[q(r(e.$t("common.home")||"Home"),1)]),_:1})]),a[11]||(a[11]=s("li",{class:"px-1 text-gray-400"},"/",-1)),s("li",null,[b(c,{to:"/categories",class:"hover:text-orange-600 hover:underline"},{default:k(()=>[q(r(e.$t("nav.categories")||"Categories"),1)]),_:1})]),o(m)?(l(),i(x,{key:0},[a[10]||(a[10]=s("li",{class:"px-1 text-gray-400"},"/",-1)),s("li",null,[b(c,{to:`/categories/${o(m).slug??o(m).id}`,class:"hover:text-orange-600 hover:underline"},{default:k(()=>[q(r(o(m).name),1)]),_:1},8,["to"])])],64)):g("",!0),a[12]||(a[12]=s("li",{class:"px-1 text-gray-400"},"/",-1)),s("li",Re,r(o(t)?.name),1)])])),o(j)?(l(),i("div",Ee,[...a[13]||(a[13]=[Ie('<div class="h-[320px] rounded-xl bg-gray-100 animate-pulse"></div><div class="space-y-4"><div class="h-10 w-4/5 bg-gray-100 rounded animate-pulse"></div><div class="h-6 w-2/5 bg-gray-100 rounded animate-pulse"></div><div class="h-12 w-40 bg-gray-100 rounded animate-pulse"></div><div class="h-24 bg-gray-100 rounded animate-pulse"></div></div>',2)])])):o(W)?(l(),i("div",ze,r(o(W)),1)):o(t)?(l(),i("div",Je,[s("div",null,[s("button",{type:"button",class:"block w-full text-left",onClick:a[0]||(a[0]=n=>F.value=!0),"aria-label":"Open image"},[o(t).image_url?(l(),ee(u,{key:0,src:o(t).image_url,format:"webp",modifiers:{fit:"contain",background:"white"},class:"w-full rounded-xl border bg-white p-3 hover:scale-[1.01] transition",alt:""},null,8,["src"])):(l(),i("div",Qe,r(e.$t("common.noImage")||"No image"),1))])]),s("aside",je,[s("header",null,[s("h1",Ke,r(o(t).name),1),s("p",We,r(o(t).tokens)+" "+r(e.$t("tokens")||"tokens"),1)]),s("div",Ye,[o(ie)?(l(),i("div",Ge,[s("span",Xe," $"+r(Number(o(D)).toFixed(2)),1),s("span",Ze," $"+r(Number(o(K)).toFixed(2)),1)])):(l(),i("div",et," $"+r(Number(o(D)).toFixed(2)),1)),o(t)?.sku?(l(),i("p",tt,"SKU: "+r(o(t).sku),1)):g("",!0)]),o(m)?(l(),i("div",st,[s("span",ot,r(e.$t("product.category")||"Category")+":",1),b(c,{to:`/categories/${o(m).slug??o(m).id}`,class:"text-orange-600 font-semibold hover:text-orange-700 hover:underline transition"},{default:k(()=>[q(r(o(m).name),1)]),_:1},8,["to"])])):g("",!0),s("div",at,[s("div",nt,[s("button",{type:"button",class:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700",onClick:a[1]||(a[1]=n=>p.value=Math.max(1,o(p)-1))}," – "),P(s("input",{"onUpdate:modelValue":a[2]||(a[2]=n=>Se(p)?p.value=n:null),type:"number",min:"1",class:"w-14 text-center border-x py-2 outline-none"},null,512),[[U,o(p),void 0,{number:!0}]]),s("button",{type:"button",class:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700",onClick:a[3]||(a[3]=n=>p.value=Number(o(p))+1)}," + ")]),s("button",{class:"btn",onClick:a[4]||(a[4]=n=>re())},r(e.$t("btn.addToCart")||"Add to Cart"),1)]),o(t)?.pricing_tiers?.length?(l(),i("div",lt,[s("div",it,r(e.$t("product.bulkPricing")||"Bulk pricing"),1),s("table",rt,[s("thead",ct,[s("tr",null,[s("th",ut,r(e.$t("common.quantity")||"Quantity"),1),s("th",dt,r(e.$t("common.price")||"Price"),1)])]),s("tbody",null,[(l(!0),i(x,null,H(o(t).pricing_tiers,(n,y)=>(l(),i("tr",{key:y,class:"border-t"},[s("td",mt,[n.max_qty?(l(),i("span",gt,r(n.min_qty)+"–"+r(n.max_qty),1)):(l(),i("span",pt,r(n.min_qty)+"+ ",1))]),s("td",_t,[n.sale_price_usd?(l(),i(x,{key:0},[s("span",vt,"$"+r(Number(n.sale_price_usd).toFixed(2)),1),s("span",yt,"$"+r(Number(n.price_usd).toFixed(2)),1)],64)):(l(),i("span",ft,"$"+r(Number(n.price_usd).toFixed(2)),1))])]))),128))])])])):g("",!0)])])):g("",!0),o(t)?(l(),i("div",bt,[s("div",xt,[(l(!0),i(x,null,H(o(ue),n=>(l(),i("button",{key:n.key,type:"button",class:Fe(["px-3 sm:px-4 py-2 rounded-t-lg text-sm sm:text-base transition focus:outline-none focus:ring-2 focus:ring-orange-400",o(I)===n.key?"bg-white border-b-2 border-orange-500 text-gray-900 font-medium -mb-px":"text-gray-500 hover:text-gray-800"]),onClick:y=>I.value=n.key},r(n.label),11,ht))),128))]),s("div",kt,[o(I)==="desc"?(l(),i("section",wt,[o(t).description?(l(),i("div",$t,[s("div",{innerHTML:o(t).description},null,8,Nt)])):(l(),i("p",qt,r(e.$t("common.noDescription")||"No description available."),1))])):o(I)==="faq"?(l(),i("section",Ct,[o(t).faq?(l(),i("div",{key:0,class:"prose max-w-none",innerHTML:o(t).faq},null,8,Tt)):(l(),i("p",It,r(e.$t("common.noFaq")||"No FAQ available."),1))])):(l(),i("section",St,[s("form",{class:"space-y-4 max-w-2xl",onSubmit:te(de,["prevent"])},[s("div",Lt,[s("div",null,[s("label",Ft,r(e.$t("common.name")||"Name"),1),P(s("input",{"onUpdate:modelValue":a[5]||(a[5]=n=>o(_).name=n),type:"text",required:"",class:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400"},null,512),[[U,o(_).name,void 0,{trim:!0}]])]),s("div",null,[s("label",Mt,r(e.$t("common.email")||"Email"),1),P(s("input",{"onUpdate:modelValue":a[6]||(a[6]=n=>o(_).email=n),type:"email",required:"",class:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400"},null,512),[[U,o(_).email,void 0,{trim:!0}]])])]),s("div",null,[s("label",Pt,r(e.$t("common.message")||"Message"),1),P(s("textarea",{"onUpdate:modelValue":a[7]||(a[7]=n=>o(_).message=n),rows:"6",required:"",class:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400",placeholder:e.$t("common.contactPlaceholder")||"How can we help?"},null,8,Ut),[[U,o(_).message,void 0,{trim:!0}]])]),s("button",{class:"btn",disabled:o(S)},[o(S)?(l(),i("span",Bt,r(e.$t("common.sending")||"Sending…"),1)):(l(),i("span",Ot,r(e.$t("common.send")||"Send"),1))],8,Ht),o(V)?(l(),i("p",Dt,r(e.$t("common.sentThanks")||"Thanks! We will reply shortly."),1)):g("",!0),o(L)?(l(),i("p",Vt,r(o(L)),1)):g("",!0)],32)]))])])):g("",!0),o(t)?(l(),i("section",{key:5,ref_key:"relatedSentinel",ref:E,class:"mt-10"},[s("h2",At,r(e.$t("product.related")||"Related Token Packs"),1),o(M)?(l(),i("div",Rt,[(l(),i(x,null,H(8,n=>s("div",{key:n,class:"h-56 rounded-xl bg-gray-100 animate-pulse"})),64))])):o(A).length?(l(),i("div",Et,[(l(!0),i(x,null,H(o(A),n=>(l(),i("article",{key:n.id,class:"bg-white rounded-xl border shadow-sm hover:shadow-md transition overflow-hidden"},[b(c,{to:`/product/${n.slug}`,class:"block"},{default:k(()=>[n.image_url?(l(),ee(u,{key:0,src:n.image_url,format:"webp",modifiers:{fit:"cover"},class:"w-full bg-gray-100 aspect-[4/3]",alt:""},null,8,["src"])):(l(),i("div",zt,"—"))]),_:2},1032,["to"]),s("div",Jt,[b(c,{to:`/product/${n.slug}`,class:"block font-medium leading-5 hover:underline line-clamp-2"},{default:k(()=>[q(r(n.name),1)]),_:2},1032,["to"]),s("div",Qt,[n.sale_price_usd&&!n.pricing_tiers?.length?(l(),i(x,{key:0},[s("span",jt,"$"+r(Number(n.sale_price_usd).toFixed(2)),1),s("span",Kt,"$"+r(Number(n.price_usd).toFixed(2)),1)],64)):(l(),i("span",Wt,"$"+r(Number(n.price_usd).toFixed(2)),1))]),s("button",{class:"btn btn-sm w-full mt-1",onClick:y=>ce(n)},r(e.$t("btn.addToCart")||"Add to Cart"),9,Yt)])]))),128))])):o(R)?(l(),i("p",Gt,r(e.$t("product.noRelated")||"No related packs."),1)):g("",!0)],512)):g("",!0),o(F)&&o(t)?.image_url?(l(),i("div",{key:6,class:"fixed inset-0 bg-black/70 z-50 grid place-items-center p-4",onClick:a[9]||(a[9]=te(n=>F.value=!1,["self"]))},[s("button",{class:"absolute top-4 right-4 text-white text-2xl",onClick:a[8]||(a[8]=n=>F.value=!1)},"✕"),b(u,{src:o(t).image_url,format:"webp",class:"w-full lg:w-1/2 rounded-lg max-w-[600px]",alt:""},null,8,["src"])])):g("",!0)])}}});export{as as default};
