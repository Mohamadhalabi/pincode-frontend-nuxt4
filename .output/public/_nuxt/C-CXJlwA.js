import{_ as S}from"./DsN7wOsT.js";import{i as U,e as j,A as T,B as H,j as L,q as A,k as p,c as d,a as t,b as D,w as E,t as a,h as e,d as f,p as B,m as M,y as c,z as _,C,D as N,o as u}from"./CNQ7mN1-.js";import{u as F}from"./BexhIfcK.js";import{_ as I}from"./DlAUqK2U.js";const O={class:"max-w-5xl mx-auto px-4 py-10 sm:py-16"},$={class:"flex items-center text-sm text-gray-500 mb-8","aria-label":"Breadcrumb"},G={class:"text-gray-900 font-medium"},W={class:"text-3xl font-extrabold text-gray-900 mb-8 tracking-tight text-center sm:text-left"},J={class:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden"},K={class:"grid lg:grid-cols-[1fr_auto_1fr]"},Q={class:"p-8 lg:p-10"},X={class:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2"},Y={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},Z={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},tt={class:"relative"},et=["type"],st=["disabled"],ot={key:0},at={key:1,class:"flex items-center justify-center gap-2"},it={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg border border-red-100 text-center"},lt={class:"p-8 lg:p-10 bg-gray-50/30"},nt={class:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2"},rt={class:"grid sm:grid-cols-2 gap-4"},dt={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},ct={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},ut={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},mt={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},pt={class:"relative"},gt=["type"],xt={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},ft=["type"],wt=["disabled"],ht={key:0},yt={key:1,class:"flex items-center justify-center gap-2"},bt={key:0,class:"text-red-600 text-sm bg-red-50 p-3 rounded-lg border border-red-100 text-center"},vt=U({__name:"login",setup(_t){const{t:o}=j(),V=T(),{$api:k}=H(),r=typeof L=="function"?L():null,w=F(),m=A({email:"",password:""}),h=p(!1),y=p(null),b=p(!1),i=A({first_name:"",last_name:"",email:"",password:"",password_confirmation:""}),v=p(!1),g=p(null),x=p(!1);async function q(){const n=w.snapshot();if(n.length){try{await k("/cart/merge",{method:"POST",body:{items:n}})}catch{}try{const s=await k("/cart",{method:"GET"});w.replace(Array.isArray(s?.items)?s.items:[])}catch{w.clear()}}}async function z(){y.value=null,h.value=!0;try{await r.login({email:m.email,password:m.password}),await w.afterAuthSync(),V.push("/")}catch(n){y.value=n?.data?.message||n?.message||"Login failed"}finally{h.value=!1}}async function P(){if(g.value=null,i.password!==i.password_confirmation){g.value=o("auth.passwordsNotMatch")||"Passwords do not match";return}v.value=!0;try{r&&typeof r.register=="function"?await r.register({...i,device:"web"}):(await k("/auth/register",{method:"POST",body:{...i,device:"web"}}),r&&typeof r.login=="function"&&await r.login(i.email,i.password)),await q(),V.push("/")}catch(n){g.value=n?.data?.message||n?.message||o("auth.registerFailed")||"Registration failed"}finally{v.value=!1}}return(n,s)=>{const R=S;return u(),d("div",O,[t("nav",$,[D(R,{to:"/",class:"hover:text-[#0e5e6f] transition-colors"},{default:E(()=>[f(a(e(o)("common.home")||"Home"),1)]),_:1}),s[9]||(s[9]=t("span",{class:"mx-2 text-gray-300"},"›",-1)),t("span",G,a(e(o)("auth.login")||"Login"),1)]),t("h1",W,a(e(o)("auth.welcome")||"Welcome Back"),1),t("div",J,[t("div",K,[t("section",Q,[t("h2",X,[s[10]||(s[10]=t("svg",{class:"w-5 h-5 text-[#3adbc4]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})],-1)),f(" "+a(e(o)("auth.login")||"Login"),1)]),t("form",{class:"space-y-5",onSubmit:B(z,["prevent"])},[t("div",null,[t("label",Y,a(e(o)("common.email")||"Email"),1),c(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>e(m).email=l),type:"email",required:"",class:"input"},null,512),[[_,e(m).email,void 0,{trim:!0}]])]),t("div",null,[t("label",Z,a(e(o)("auth.password")||"Password"),1),t("div",tt,[c(t("input",{type:e(b)?"text":"password","onUpdate:modelValue":s[1]||(s[1]=l=>e(m).password=l),required:"",class:"input pr-10"},null,8,et),[[C,e(m).password]]),t("button",{type:"button",class:"absolute inset-y-0 right-3 my-auto text-gray-400 hover:text-[#0e5e6f] transition-colors",onClick:s[2]||(s[2]=l=>b.value=!e(b))},[t("span",{class:N(e(b)?"i-lucide:eye-off":"i-lucide:eye")},null,2)])])]),t("button",{class:"btn w-full",disabled:e(h)},[e(h)?(u(),d("span",at,[s[11]||(s[11]=t("svg",{class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),f(" "+a(e(o)("common.loading")||"Loading…"),1)])):(u(),d("span",ot,a(e(o)("auth.login")||"Login"),1))],8,st),e(y)?(u(),d("p",it,a(e(y)),1)):M("",!0)],32)]),s[14]||(s[14]=t("div",{class:"relative flex items-center justify-center"},[t("div",{class:"hidden lg:block w-px h-3/4 bg-gray-200"}),t("div",{class:"lg:hidden h-px w-3/4 bg-gray-200 my-4"}),t("div",{class:"absolute bg-white p-2 text-xs font-bold text-gray-400 uppercase tracking-widest"},"OR")],-1)),t("section",lt,[t("h2",nt,[s[12]||(s[12]=t("svg",{class:"w-5 h-5 text-[#3adbc4]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)),f(" "+a(e(o)("auth.register")||"Create Account"),1)]),t("form",{class:"space-y-5",onSubmit:B(P,["prevent"])},[t("div",rt,[t("div",null,[t("label",dt,a(e(o)("auth.firstName")||"First name"),1),c(t("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>e(i).first_name=l),type:"text",required:"",class:"input"},null,512),[[_,e(i).first_name,void 0,{trim:!0}]])]),t("div",null,[t("label",ct,a(e(o)("auth.lastName")||"Last name"),1),c(t("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>e(i).last_name=l),type:"text",required:"",class:"input"},null,512),[[_,e(i).last_name,void 0,{trim:!0}]])])]),t("div",null,[t("label",ut,a(e(o)("common.email")||"Email"),1),c(t("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>e(i).email=l),type:"email",required:"",class:"input"},null,512),[[_,e(i).email,void 0,{trim:!0}]])]),t("div",null,[t("label",mt,a(e(o)("auth.password")||"Password"),1),t("div",pt,[c(t("input",{type:e(x)?"text":"password","onUpdate:modelValue":s[6]||(s[6]=l=>e(i).password=l),required:"",minlength:"6",class:"input pr-10"},null,8,gt),[[C,e(i).password]]),t("button",{type:"button",class:"absolute inset-y-0 right-3 my-auto text-gray-400 hover:text-[#0e5e6f] transition-colors",onClick:s[7]||(s[7]=l=>x.value=!e(x))},[t("span",{class:N(e(x)?"i-lucide:eye-off":"i-lucide:eye")},null,2)])])]),t("div",null,[t("label",xt,a(e(o)("auth.confirmPassword")||"Confirm password"),1),c(t("input",{type:e(x)?"text":"password","onUpdate:modelValue":s[8]||(s[8]=l=>e(i).password_confirmation=l),required:"",minlength:"6",class:"input"},null,8,ft),[[C,e(i).password_confirmation]])]),t("button",{class:"btn w-full",disabled:e(v)},[e(v)?(u(),d("span",yt,[s[13]||(s[13]=t("svg",{class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),f(" "+a(e(o)("common.loading")||"Loading…"),1)])):(u(),d("span",ht,a(e(o)("auth.createAccount")||"Register"),1))],8,wt),e(g)?(u(),d("p",bt,a(e(g)),1)):M("",!0)],32)])])])])}}}),At=I(vt,[["__scopeId","data-v-84ce1497"]]);export{At as default};
