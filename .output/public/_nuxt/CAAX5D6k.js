import{_ as Y}from"./DsN7wOsT.js";import{_ as D}from"./Q7S53kZ7.js";import{i as H,e as K,j as E,f as w,k as V,l as O,c as i,o as l,a as t,t as n,h as s,b as m,w as b,d as _,m as I,F as k,r as $,n as N,p as g}from"./CNQ7mN1-.js";import{u as U}from"./BexhIfcK.js";import{_ as z}from"./DlAUqK2U.js";const G={class:"mx-auto max-w-6xl px-4 py-8 lg:py-12"},J={class:"mb-8 text-3xl font-extrabold tracking-tight text-gray-900"},W={key:0,class:"rounded-3xl border border-dashed border-gray-300 bg-gray-50 p-12 text-center text-gray-600"},X={class:"mb-6 text-lg font-medium"},Z={key:1,class:"grid gap-8 lg:grid-cols-12"},tt={class:"lg:col-span-8 space-y-6"},et={key:0,class:"space-y-4"},ot={key:1,class:"hidden md:block rounded-2xl border border-gray-200 bg-white shadow-sm overflow-hidden"},st={class:"w-full text-sm"},nt={class:"bg-gray-50 border-b border-gray-200 text-gray-500 uppercase text-xs tracking-wider"},at={class:"px-6 py-4 text-left font-bold w-[500px]"},rt={class:"px-4 py-4 text-right font-bold"},lt={class:"px-4 py-4 text-center font-bold"},dt={class:"px-4 py-4 text-center font-bold"},ct={class:"px-4 py-4 text-right font-bold"},it={class:"divide-y divide-gray-100"},ut={class:"px-6 py-5"},pt={class:"flex items-start gap-4"},ht={key:1,class:"h-20 w-20 rounded-xl border border-gray-200 bg-gray-50 grid place-items-center text-gray-400"},yt={class:"min-w-0 pt-1"},bt={class:"mt-2 flex flex-wrap items-center gap-2 text-xs"},_t={key:0,class:"inline-flex rounded-md bg-gray-100 px-2 py-0.5 text-gray-600 font-mono"},xt={class:"px-4 py-5 text-right tabular-nums font-medium text-gray-600"},ft={class:"px-4 py-5"},mt={class:"flex justify-center"},gt={class:"inline-flex items-center rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden"},vt=["disabled","onClick"],wt=["value","disabled","onInput","onBlur"],kt=["disabled","onClick"],Ct={class:"px-4 py-5 text-center"},It={key:0,class:"tabular-nums font-medium text-[#0e5e6f] bg-[#f0fdfc] px-2 py-1 rounded-lg text-xs"},$t={key:1,class:"text-gray-300"},Nt={class:"px-4 py-5 text-right text-base font-bold tabular-nums text-[#0e5e6f]"},jt={class:"px-6 py-5 text-right"},Bt=["disabled","onClick"],St={key:2,class:"md:hidden space-y-4"},Tt={class:"flex items-start gap-4"},qt={key:1,class:"h-24 w-24 rounded-xl border bg-gray-50 grid place-items-center text-gray-400"},At={class:"min-w-0 flex-1"},Lt={class:"mt-1 flex flex-wrap items-center gap-2 text-xs"},Mt={class:"font-medium text-[#0e5e6f]"},Qt={class:"mt-4 flex items-center justify-between"},Vt={class:"inline-flex items-center rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden h-9"},Ft=["disabled","onClick"],Pt=["value","disabled","onInput","onBlur"],Rt=["disabled","onClick"],Yt={class:"text-right"},Dt={class:"text-lg font-bold text-[#0e5e6f]"},Ht={class:"mt-3 pt-3 border-t border-gray-100 flex justify-end"},Kt=["disabled","onClick"],Et={key:0,class:"flex items-center justify-between pt-2"},Ot={class:"lg:col-span-4"},Ut={class:"lg:sticky lg:top-24 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm"},zt={class:"border-b border-gray-100 bg-gradient-to-r from-[#0e5e6f]/5 to-[#3adbc4]/10 px-6 py-4"},Gt={class:"text-lg font-bold text-gray-900"},Jt={class:"p-6 space-y-4"},Wt={class:"flex justify-between text-sm"},Xt={class:"text-gray-600"},Zt={class:"font-bold tabular-nums text-gray-900"},te={class:"border-t border-gray-100 pt-4 flex justify-between items-center"},ee={class:"text-base font-bold text-gray-900"},oe={class:"text-3xl font-black tabular-nums text-[#0e5e6f]"},se={class:"pt-2"},ne={class:"mt-3 text-xs text-center text-gray-500"},ae={class:"mt-3 text-center md:hidden"},re=H({__name:"cart",setup(le){const{t:c}=K(),r=U(),F=E(),P=w(()=>F.isLoggedIn.value),y=w(()=>{const o=r?.items;return Array.isArray(o?.value)?o.value:Array.isArray(o)?o:[]}),j=w(()=>y.value.length),v=V(!1);O(()=>{v.value=!0});const B=w(()=>y.value.reduce((o,a)=>o+Number(a?.price||0)*Number(a?.qty||0),0)),x=o=>Number(o||0).toFixed(2),S=o=>Number(o?.price||0)*Number(o?.qty||0),p=o=>o?.id??`${o?.product_type}:${o?.product_id}`,T=o=>String(p(o)),h=V(null);async function C(o,a){a=Math.max(1,Number(a)||1);const d=p(o);h.value=d;try{o.qty=a,typeof r.setQty=="function"?await r.setQty(o,a):typeof r.update=="function"?await r.update(o,{qty:a}):r.sync?.(),typeof r.reload=="function"&&await r.reload()}catch(f){console.error(f)}finally{h.value=null}}async function q(o){const a=p(o);h.value=a;try{const d=y.value.findIndex(f=>p(f)===a);d>-1&&y.value.splice(d,1),typeof r.remove=="function"?await r.remove(o):typeof r.removeItem=="function"?await r.removeItem(o):r.sync?.(),typeof r.reload=="function"&&await r.reload()}catch(d){console.error(d),typeof r.reload=="function"&&await r.reload()}finally{h.value=null}}function A(o){C(o,Number(o?.qty||1)-1)}function L(o){C(o,Number(o?.qty||1)+1)}function M(o,a){const d=o.target.value.replace(/[^\d]/g,"");o.target.value=d,a.qty=Math.max(1,Number(d)||1)}function Q(o,a){const d=Number(o.target.value||1);C(a,d)}function R(){confirm(c("cart.clearConfirm")||"Clear all items from cart?")&&(typeof r.clear=="function"?r.clear():y.value.splice(0,y.value.length),r.sync?.(),typeof r.reload=="function"&&r.reload())}return(o,a)=>{const d=Y,f=D;return l(),i("div",G,[t("h1",J,n(s(c)("cart.title")||"Your Cart"),1),s(v)&&s(j)===0?(l(),i("div",W,[a[0]||(a[0]=t("div",{class:"mb-4 text-6xl opacity-20"},"ðŸ›’",-1)),t("p",X,n(s(c)("cart.empty")||"Your cart is currently empty."),1),m(d,{to:"/",class:"btn inline-flex"},{default:b(()=>[_(n(s(c)("common.continueShopping")||"Start Shopping"),1)]),_:1})])):(l(),i("div",Z,[t("section",tt,[s(v)?(l(),i("div",ot,[t("table",st,[t("thead",nt,[t("tr",null,[t("th",at,n(s(c)("cart.product")||"Product"),1),t("th",rt,n(s(c)("cart.price")||"Price"),1),t("th",lt,n(s(c)("cart.qty")||"Qty"),1),t("th",dt,n(s(c)("tokens")||"Tokens"),1),t("th",ct,n(s(c)("cart.lineTotal")||"Total"),1),a[1]||(a[1]=t("th",{class:"px-6 py-4 text-right font-bold w-[80px]"},null,-1))])]),t("tbody",it,[(l(!0),i(k,null,$(s(y),e=>(l(),i("tr",{key:T(e),class:"hover:bg-[#f0fdfc]/30 transition-colors"},[t("td",ut,[t("div",pt,[e?.image?(l(),N(f,{key:0,src:e.image,width:"80",height:"80",modifiers:{fit:"cover"},class:"h-20 w-20 rounded-xl border border-gray-200 bg-white object-contain p-1",alt:""},null,8,["src"])):(l(),i("div",ht,"â€”")),t("div",yt,[m(d,{to:`/product/${e?.slug}`,class:"line-clamp-2 text-base font-bold leading-snug hover:text-[#0e5e6f] hover:underline text-gray-900 transition-colors"},{default:b(()=>[_(n(e?.name),1)]),_:2},1032,["to"]),t("div",bt,[e?.sku?(l(),i("span",_t,"SKU: "+n(e.sku),1)):I("",!0)])])])]),t("td",xt,"$"+n(x(e?.price)),1),t("td",ft,[t("div",mt,[t("div",gt,[t("button",{type:"button",class:"h-8 w-9 grid place-items-center hover:bg-gray-50 disabled:opacity-50 text-gray-500 hover:text-[#0e5e6f] font-bold transition-colors",disabled:s(h)===p(e),onClick:g(u=>A(e),["stop"]),"aria-label":"Decrease quantity"},"âˆ’",8,vt),t("input",{value:e?.qty,inputmode:"numeric",pattern:"[0-9]*",class:"h-8 w-10 border-x border-gray-100 text-center outline-none disabled:opacity-60 text-gray-900 font-semibold text-sm",disabled:s(h)===p(e),onInput:u=>M(u,e),onBlur:u=>Q(u,e)},null,40,wt),t("button",{type:"button",class:"h-8 w-9 grid place-items-center hover:bg-gray-50 disabled:opacity-50 text-gray-500 hover:text-[#0e5e6f] font-bold transition-colors",disabled:s(h)===p(e),onClick:g(u=>L(e),["stop"]),"aria-label":"Increase quantity"},"+",8,kt)])])]),t("td",Ct,[e?.meta?.tokens?(l(),i("span",It,n(e?.qty*e.meta.tokens),1)):(l(),i("span",$t,"â€”"))]),t("td",Nt," $"+n(x(S(e))),1),t("td",jt,[t("button",{class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50",disabled:s(h)===p(e),onClick:g(u=>q(e),["stop"]),"aria-label":"Remove item"},[...a[2]||(a[2]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Bt)])]))),128))])])])):(l(),i("div",et,[(l(),i(k,null,$(3,e=>t("div",{key:e,class:"h-32 rounded-2xl border bg-gray-50 animate-pulse"})),64))])),s(v)?(l(),i("div",St,[(l(!0),i(k,null,$(s(y),e=>(l(),i("div",{key:T(e),class:"rounded-2xl border border-gray-200 bg-white p-4 shadow-sm"},[t("div",Tt,[e?.image?(l(),N(f,{key:0,src:e.image,width:"96",height:"96",modifiers:{fit:"cover"},class:"h-24 w-24 rounded-xl border border-gray-100 bg-white object-contain p-1",alt:""},null,8,["src"])):(l(),i("div",qt,"â€”")),t("div",At,[m(d,{to:`/product/${e?.slug}`,class:"line-clamp-2 font-bold text-gray-900 leading-snug hover:text-[#0e5e6f]"},{default:b(()=>[_(n(e?.name),1)]),_:2},1032,["to"]),t("div",Lt,[t("span",Mt,"$"+n(x(e?.price))+" / unit",1)]),t("div",Qt,[t("div",Vt,[t("button",{type:"button",class:"h-full w-9 grid place-items-center hover:bg-gray-50 disabled:opacity-50 text-gray-500 font-bold",disabled:s(h)===p(e),onClick:g(u=>A(e),["stop"])},"âˆ’",8,Ft),t("input",{value:e?.qty,inputmode:"numeric",pattern:"[0-9]*",class:"h-full w-10 border-x border-gray-100 text-center outline-none disabled:opacity-60 text-sm font-semibold",disabled:s(h)===p(e),onInput:u=>M(u,e),onBlur:u=>Q(u,e)},null,40,Pt),t("button",{type:"button",class:"h-full w-9 grid place-items-center hover:bg-gray-50 disabled:opacity-50 text-gray-500 font-bold",disabled:s(h)===p(e),onClick:g(u=>L(e),["stop"])},"+",8,Rt)]),t("div",Yt,[a[3]||(a[3]=t("div",{class:"text-[10px] uppercase tracking-wide text-gray-400 font-bold"},"Total",-1)),t("div",Dt,"$"+n(x(S(e))),1)])])])]),t("div",Ht,[t("button",{class:"text-xs font-semibold text-red-600 hover:bg-red-50 px-3 py-1.5 rounded-lg transition-colors",disabled:s(h)===p(e),onClick:g(u=>q(e),["stop"])}," Remove Item ",8,Kt)])]))),128)),s(j)?(l(),i("div",Et,[m(d,{to:"/",class:"text-sm font-medium text-gray-600 hover:text-[#0e5e6f] transition-colors"},{default:b(()=>[_(" â† "+n(s(c)("common.continueShopping")||"Continue shopping"),1)]),_:1}),t("button",{type:"button",class:"text-sm font-medium text-red-600 hover:bg-red-50 px-3 py-1 rounded-lg transition-colors",onClick:R},n(s(c)("cart.clear")||"Clear cart"),1)])):I("",!0)])):I("",!0)]),t("aside",Ot,[t("div",Ut,[t("div",zt,[t("h2",Gt,n(s(c)("cart.summary")||"Order Summary"),1)]),t("div",Jt,[t("div",Wt,[t("span",Xt,n(s(c)("cart.subtotal")||"Subtotal"),1),t("span",Zt,"$"+n(x(s(B))),1)]),t("div",te,[t("span",ee,n(s(c)("cart.total")||"Total"),1),t("span",oe,"$"+n(x(s(B))),1)]),t("div",se,[s(P)?(l(),N(d,{key:0,to:"/checkout",class:"btn w-full shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"},{default:b(()=>[_(n(s(c)("cart.checkout")||"Proceed to Checkout"),1)]),_:1})):(l(),i(k,{key:1},[m(d,{to:"/login",class:"btn w-full"},{default:b(()=>[_(n(s(c)("cart.loginToCheckout")||"Login to checkout"),1)]),_:1}),t("p",ne,n(s(c)("cart.loginToCheckoutHint")||"You need to login to complete your purchase."),1)],64)),t("div",ae,[m(d,{to:"/",class:"text-sm text-gray-500 hover:text-[#0e5e6f]"},{default:b(()=>[_(n(s(c)("common.continueShopping")||"Continue shopping"),1)]),_:1})])])])])])]))])}}}),he=z(re,[["__scopeId","data-v-f7ed6902"]]);export{he as default};
