import{i as W,e as Y,H as G,A as Z,B as J,f as h,k as f,q as Q,x as X,j as M,l as K,c as l,m as v,h as t,a as e,t as s,F as V,d as m,p as ee,r as te,o as i,y as oe,z as se}from"./CNQ7mN1-.js";import{_ as re}from"./DlAUqK2U.js";const ne={class:"max-w-3xl mx-auto px-4 py-10 lg:py-16"},le={key:0,class:"text-center py-12"},ie={class:"text-gray-500 font-medium"},ae={key:1,class:"rounded-2xl bg-red-50 border border-red-100 text-red-700 px-6 py-4 mb-6 text-sm font-medium text-center"},de={class:"text-center mb-10"},ce={class:"text-3xl font-extrabold text-gray-900 mb-3 tracking-tight"},ue={class:"grid gap-5 sm:grid-cols-2 mb-8"},pe={class:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm flex flex-col justify-between hover:shadow-md transition-shadow relative overflow-hidden"},me={class:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-1 z-10"},ve={class:"text-4xl font-black text-[#0e5e6f] z-10"},fe={class:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm flex flex-col justify-between hover:shadow-md transition-shadow relative overflow-hidden"},be={class:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-1 z-10"},he={class:"text-4xl font-black text-gray-900 z-10"},xe={class:"rounded-2xl border border-gray-200 bg-gray-50/50 p-6 mb-8"},ge={class:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2"},we={class:"whitespace-pre-wrap text-sm text-gray-600 font-sans leading-relaxed bg-white p-4 rounded-xl border border-gray-200"},ke={key:0,class:"rounded-2xl border border-emerald-200 bg-emerald-50 p-5 mb-8 text-sm text-emerald-900 flex items-start gap-3"},ye={class:"font-bold mb-1"},_e={class:"font-mono font-bold"},Ce={class:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-hidden"},je={class:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2"},Le={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},Ne=["onUpdate:modelValue","maxlength","minlength","placeholder"],Be={key:0,class:"mt-1.5 text-xs text-red-600 font-medium flex items-center gap-1"},ze={key:0,class:"mt-2"},Ie={key:0,class:"rounded-xl bg-red-50 border border-red-200 text-red-700 px-4 py-3 text-sm space-y-3"},Me={class:"font-bold flex items-center gap-2"},Ve={key:1,class:"rounded-xl bg-red-50 border border-red-100 text-red-600 px-4 py-3 text-sm font-medium"},Te={key:1,class:"rounded-xl bg-emerald-50 border border-emerald-100 text-emerald-700 px-4 py-3 text-sm font-bold flex items-center gap-2"},Ee=["disabled"],Se={key:0,class:"flex items-center justify-center gap-2"},qe={key:1,class:"flex items-center justify-center gap-2"},$e={key:2,class:"text-center text-xs font-bold text-red-600 bg-red-50 py-2 rounded-lg border border-red-100"},Ae={key:0,class:"mt-8 rounded-xl border-2 border-[#0e5e6f] bg-[#f0fdfc] p-6 shadow-md relative overflow-hidden"},Oe={class:"flex items-center justify-between mb-4 border-b border-[#0e5e6f]/10 pb-3"},Ue={class:"font-bold text-[#0e5e6f] uppercase tracking-wider text-sm flex items-center gap-2"},Re={key:0,class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pe={key:1,class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},De={class:"space-y-3"},He={key:0,class:"flex justify-between items-center bg-white/60 p-2 rounded-lg border border-[#0e5e6f]/10"},Fe={class:"font-mono font-bold text-gray-900 tracking-wide"},We={key:1,class:"flex justify-between items-center bg-white/60 p-2 rounded-lg border border-[#0e5e6f]/10"},Ye={class:"font-mono font-black text-xl text-[#0e5e6f] tracking-widest"},Ge={key:2,class:"flex justify-between items-center bg-white p-3 rounded-lg border border-[#3adbc4] shadow-sm"},Ze={class:"font-mono font-black text-2xl text-[#0e5e6f] tracking-[0.2em]"},Je=W({__name:"[slug]",setup(Qe){const{t:a,locale:T}=Y(),N=G(),E=Z(),{$api:B}=J(),S=h(()=>N.params.slug),c=f(null),y=f(!1),g=f(null),d=f(null),u=Q({});X(()=>u.vin,r=>{if(!r)return;let o=r.toUpperCase();o=o.replace(/O/gi,"0"),o!==r&&(u.vin=o)});const w=f(!1),b=f(null),k=f(null),x=f("idle"),q=typeof M=="function"?M():null,$=h(()=>q?.user?.value||null),A=localStorage.getItem("auth_token"),_=h(()=>Number(c.value?.wallet_tokens||0)),C=h(()=>Number(c.value?.cost_tokens||0)),O=h(()=>c.value?.behavior||"decoder"),U=h(()=>{if(!c.value||_.value<C.value)return!1;const r=c.value.required_inputs||[];for(const o of r){const n=o.toLowerCase(),p=(u[n]||"").trim();if(!p||n==="vin"&&p.length!==17)return!1}return!0}),R=h(()=>b.value?b.value===a("decoder.vin_unavailable"):!1);K(async()=>{if(!$.value&&!A){E.push("/login?redirect="+encodeURIComponent(N.fullPath));return}await z()});async function z(){y.value=!0,g.value=null;try{const r=await B(`/services/${S.value}`,{method:"GET"});c.value=r,(r.required_inputs||[]).forEach(n=>{const p=n.toLowerCase();p in u||(u[p]="")})}catch(r){console.error(r),g.value=r?.data?.message||r?.message||"Failed to load service"}finally{y.value=!1}}async function P(){if(c.value){b.value=null,k.value=null,w.value=!0,d.value=null,x.value="idle";try{const r={};Object.entries(u).forEach(([j,F])=>{const I=j.toLowerCase();let L=String(F||"").trim();I==="vin"&&(L=L.toUpperCase().replace(/O/gi,"0")),r[I]=L});const n={service_category_id:c.value.id,input_payload:r},p=await B(`/vin-lookups?locale=${T.value}`,{method:"POST",body:n});k.value=p?.message||a("service.submit.success")||"Lookup submitted successfully.",d.value={vin:p?.vin??null,key_code:p?.key_code??null,pin_code:p?.pin_code??null},Object.keys(u).forEach(j=>u[j]=""),await z()}catch(r){console.error(r),b.value=r?.data?.message||r?.message||a("service.submit.error")||"Failed to submit lookup."}finally{w.value=!1}}}function D(){const o="+971504429045".replace(/\D/g,""),n=["PIN Code request",c.value?.name?`Service: ${c.value.name}`:"",u.vin?`VIN: ${u.vin}`:""].filter(Boolean),p=`https://wa.me/${o}?text=${encodeURIComponent(n.join(`
`))}`;window.open(p,"_blank")}async function H(){if(!d.value)return;const r=[];d.value.vin&&r.push(`VIN: ${d.value.vin}`),d.value.key_code&&r.push(`KEYCODE: ${d.value.key_code}`),d.value.pin_code&&r.push(`PINCODE: ${d.value.pin_code}`);const o=r.join(`
`);try{await navigator.clipboard.writeText(o),x.value="copied",setTimeout(()=>{x.value="idle"},2e3)}catch(n){console.error("Clipboard error",n)}}return(r,o)=>(i(),l("div",ne,[t(y)?(i(),l("div",le,[o[0]||(o[0]=e("div",{class:"animate-spin h-8 w-8 border-4 border-[#0e5e6f] border-t-transparent rounded-full mx-auto mb-4"},null,-1)),e("p",ie,s(t(a)("common.loading")||"Loading service details…"),1)])):t(g)?(i(),l("div",ae,s(t(g)),1)):t(c)?(i(),l(V,{key:2},[e("header",de,[e("h1",ce,s(t(c).name),1),o[1]||(o[1]=e("div",{class:"h-1 w-20 bg-gradient-to-r from-[#0e5e6f] to-[#3adbc4] mx-auto rounded-full"},null,-1))]),e("div",ue,[e("div",pe,[o[2]||(o[2]=e("div",{class:"absolute top-0 right-0 w-16 h-16 bg-[#0e5e6f]/5 rounded-bl-full -mr-4 -mt-4"},null,-1)),e("div",me,s(t(a)("service.walletTokens")||"Your Balance"),1),e("div",ve,s(t(_)),1)]),e("div",fe,[o[3]||(o[3]=e("div",{class:"absolute top-0 right-0 w-16 h-16 bg-[#3adbc4]/10 rounded-bl-full -mr-4 -mt-4"},null,-1)),e("div",be,s(t(a)("service.costTokens")||"Cost per Calculation"),1),e("div",he,s(t(C)),1)])]),e("div",xe,[e("h2",ge,[o[4]||(o[4]=e("svg",{class:"w-4 h-4 text-[#0e5e6f]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m(" "+s(t(a)("service.instructions")||"Instructions"),1)]),e("pre",we,""+s(t(c).instruction_md||t(a)("service.instructionsEmpty")||"No specific instructions provided for this service.")+`
        `,1)]),t(O)==="whatsapp"&&t(c).whatsapp_number?(i(),l("div",ke,[o[5]||(o[5]=e("svg",{class:"w-6 h-6 text-emerald-600 shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})],-1)),e("div",null,[e("p",ye,s(t(a)("service.whatsappHint")||"This service is processed via WhatsApp."),1),e("p",null,[m(s(t(a)("service.whatsappNumber")||"WhatsApp number:")+" ",1),e("span",_e,s(t(c).whatsapp_number),1)])])])):v("",!0),e("div",Ce,[o[20]||(o[20]=e("div",{class:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-[#0e5e6f] to-[#3adbc4]"},null,-1)),e("h2",je,[o[6]||(o[6]=e("svg",{class:"w-5 h-5 text-[#3adbc4]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),m(" "+s(t(a)("service.requestTitle")||"Submit Request"),1)]),e("form",{class:"space-y-5",onSubmit:ee(P,["prevent"])},[(i(!0),l(V,null,te(t(c).required_inputs||[],n=>(i(),l("div",{key:n},[e("label",Le,[o[7]||(o[7]=e("span",{class:"text-red-500 mr-1"},"*",-1)),m(s(n.toUpperCase()),1)]),oe(e("input",{"onUpdate:modelValue":p=>t(u)[n.toLowerCase()]=p,type:"text",maxlength:n.toLowerCase()==="vin"?17:null,minlength:n.toLowerCase()==="vin"?17:null,class:"w-full rounded-xl border border-gray-300 px-4 py-3 text-base focus:outline-none focus:ring-2 focus:ring-[#3adbc4] focus:border-[#3adbc4] transition-all font-mono placeholder-gray-300",placeholder:n.toLowerCase()==="vin"?"Enter 17-digit VIN":"",required:""},null,8,Ne),[[se,t(u)[n.toLowerCase()],void 0,{trim:!0}]]),n.toLowerCase()==="vin"&&t(u)[n.toLowerCase()]&&t(u)[n.toLowerCase()].length>0&&t(u)[n.toLowerCase()].length!==17?(i(),l("p",Be,[o[8]||(o[8]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m(" "+s(t(a)("service.vin_size")||"VIN must be exactly 17 characters."),1)])):v("",!0)]))),128)),t(b)?(i(),l("div",ze,[t(R)?(i(),l("div",Ie,[e("p",Me,[o[9]||(o[9]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),m(" "+s(t(b)),1)]),e("button",{type:"button",class:"inline-flex items-center rounded-lg bg-green-600 text-white px-4 py-2 text-xs font-bold hover:bg-green-700 transition-colors shadow-sm",onClick:D},s(t(a)("common.contact_whatsapp")||"Contact us on WhatsApp"),1)])):(i(),l("div",Ve,s(t(b)),1))])):v("",!0),t(k)?(i(),l("div",Te,[o[10]||(o[10]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),m(" "+s(t(k)),1)])):v("",!0),e("button",{type:"submit",class:"btn w-full mt-2",disabled:t(w)||!t(U)},[t(w)?(i(),l("span",qe,[o[12]||(o[12]=e("svg",{class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),m(" "+s(t(a)("common.loading")||"Calculating…"),1)])):(i(),l("span",Se,[m(s(t(a)("service.submit")||"Calculate Code")+" ",1),o[11]||(o[11]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1))]))],8,Ee),t(_)<t(C)?(i(),l("p",$e,s(t(a)("service.notEnoughTokens")||"Insufficient tokens. Please purchase more to continue."),1)):v("",!0)],32),t(d)&&(t(d).vin||t(d).pin_code||t(d).key_code)?(i(),l("div",Ae,[o[19]||(o[19]=e("div",{class:"absolute top-0 right-0 w-12 h-12 bg-[#3adbc4]/20 rounded-bl-full"},null,-1)),e("div",Oe,[e("div",Ue,[o[13]||(o[13]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m(" "+s(t(a)("service.resultTitle")||"Success"),1)]),e("button",{type:"button",class:"text-xs font-bold text-[#0e5e6f] hover:text-[#3adbc4] bg-white border border-[#0e5e6f]/20 px-3 py-1.5 rounded-lg transition-all flex items-center gap-1 shadow-sm",onClick:H},[t(x)!=="copied"?(i(),l("svg",Re,[...o[14]||(o[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])):(i(),l("svg",Pe,[...o[15]||(o[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),m(" "+s(t(x)==="copied"?t(a)("common.copied")||"Copied!":t(a)("common.copy")||"Copy Result"),1)])]),e("div",De,[t(d).vin?(i(),l("div",He,[o[16]||(o[16]=e("span",{class:"text-xs font-bold text-gray-500 uppercase"},"VIN",-1)),e("span",Fe,s(t(d).vin),1)])):v("",!0),t(d).key_code?(i(),l("div",We,[o[17]||(o[17]=e("span",{class:"text-xs font-bold text-gray-500 uppercase"},"Key Code",-1)),e("span",Ye,s(t(d).key_code),1)])):v("",!0),t(d).pin_code?(i(),l("div",Ge,[o[18]||(o[18]=e("span",{class:"text-xs font-bold text-[#0e5e6f] uppercase"},"PIN Code",-1)),e("span",Ze,s(t(d).pin_code),1)])):v("",!0)])])):v("",!0)])],64)):v("",!0)]))}}),et=re(Je,[["__scopeId","data-v-679f2450"]]);export{et as default};
