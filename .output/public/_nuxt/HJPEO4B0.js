import{_ as z}from"./DsN7wOsT.js";import{_ as G}from"./Q7S53kZ7.js";import{i as H,e as K,A as Y,B as J,j as V,f as i,q as Q,l as X,k as f,c,a as e,t as s,h as t,b as j,w as D,p as I,y as p,z as B,D as C,E as T,m as S,d as h,F as Z,r as ee,G as te,g as se,o as d,n as oe}from"./CNQ7mN1-.js";import{u as ae}from"./BexhIfcK.js";import{_ as re}from"./DlAUqK2U.js";const le={class:"mx-auto max-w-6xl px-4 py-8 lg:py-12"},ne={class:"mb-8 text-3xl font-extrabold tracking-tight text-gray-900"},de={key:0,class:"rounded-2xl border border-dashed border-gray-300 bg-gray-50 p-12 text-center text-gray-600"},ce={class:"mb-4 text-lg font-medium"},ie={key:1,class:"grid gap-8 lg:grid-cols-12"},ue={class:"lg:col-span-8 space-y-6"},me={class:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},pe={class:"text-lg font-bold text-gray-900 mb-5 border-b border-gray-100 pb-3"},he={class:"grid gap-5 sm:grid-cols-2"},_e={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},ye={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},be=["value"],ge={class:"mt-1.5 text-[11px] text-gray-400"},fe={class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5"},xe=["placeholder"],ve={class:"pt-6 mt-2 border-t border-gray-100"},ke={class:"text-sm font-bold text-gray-900 mb-3 uppercase tracking-wide"},we={class:"space-y-3"},Ce={class:"flex items-start gap-3"},Te={class:"font-bold text-gray-900"},Se={class:"text-sm text-gray-600 mt-0.5"},Ae={class:"flex-1 flex items-start gap-3"},Ne={class:"flex-1"},Pe={class:"font-bold text-gray-900"},Ue={class:"text-sm text-gray-600 mt-0.5"},Me={key:0,class:"mt-3 p-3 rounded-lg bg-white border border-gray-200 space-y-2 text-sm"},Ve={class:"font-semibold text-[#0e5e6f]"},je={class:"flex items-center gap-2"},De={class:"flex-1 bg-gray-50 px-2 py-1.5 rounded border border-gray-100 text-xs text-gray-600 break-all font-mono"},Ie={key:0,class:"text-emerald-600 flex items-center gap-1"},Be={key:1},Oe={class:"text-xs text-gray-500 leading-relaxed"},We={class:"flex items-start gap-3"},$e={class:"font-bold text-gray-900"},Le={class:"text-sm text-gray-600 mt-0.5"},qe={class:"lg:col-span-4"},Re={class:"lg:sticky lg:top-24 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm"},Ee={class:"border-b border-gray-100 bg-gradient-to-r from-[#0e5e6f]/5 to-[#3adbc4]/10 px-6 py-4"},Fe={class:"text-lg font-bold text-gray-900"},ze={class:"p-6 space-y-4"},Ge={class:"space-y-3 max-h-64 overflow-y-auto pr-2 custom-scrollbar"},He={class:"shrink-0"},Ke={key:1,class:"h-12 w-12 rounded-lg border border-gray-100 bg-gray-50 grid place-items-center text-gray-300 text-xs"},Ye={class:"flex-1 min-w-0 pt-0.5"},Je={class:"line-clamp-2 text-sm font-bold text-gray-900 leading-tight"},Qe={class:"text-xs text-gray-500 mt-1"},Xe={class:"font-medium"},Ze={class:"text-right tabular-nums text-sm font-bold text-[#0e5e6f]"},et={class:"flex justify-between text-sm pt-4 border-t border-gray-100"},tt={class:"text-gray-600 font-medium"},st={class:"font-bold tabular-nums text-gray-900"},ot={class:"border-t border-gray-100 pt-3 flex justify-between items-center"},at={class:"text-base font-bold text-gray-900"},rt={class:"text-2xl font-black tabular-nums text-[#0e5e6f]"},lt={class:"mt-4 pt-4 border-t border-gray-100 space-y-3"},nt={class:"flex items-start gap-3 cursor-pointer group"},dt={class:"text-xs text-gray-600 group-hover:text-gray-900 transition-colors leading-relaxed"},ct={key:0,class:"rounded-xl bg-red-50 px-4 py-3 text-xs font-medium text-red-700 border border-red-100"},it={key:1,class:"rounded-xl bg-emerald-50 px-4 py-3 text-xs font-medium text-emerald-700 border border-emerald-100"},ut=["disabled"],mt={key:0,class:"flex items-center justify-center gap-2"},pt={key:1},ht=H({__name:"checkout",setup(_t){const{t:o}=K(),O=ae();Y();const{$api:W}=J(),$=typeof V=="function"?V():null,x=i(()=>$?.user?.value),v=i(()=>x.value?.email||""),A=se(),k=i(()=>A.public?.usdtWallet||"");i(()=>A.public?.whatsappNumber||"");const y=i(()=>{const a=O?.items;return Array.isArray(a?.value)?a.value:Array.isArray(a)?a:[]}),N=i(()=>y.value.length),P=i(()=>y.value.reduce((a,l)=>a+Number(l?.price||0)*Number(l?.qty||0),0)),b=a=>Number(a||0).toFixed(2),L=a=>Number(a?.price||0)*Number(a?.qty||0),q=a=>a?.id??`${a?.product_type}:${a?.product_id}`,R=a=>String(q(a)),r=Q({full_name:"",company:"",vat_number:"",notes:"",payment_method:"",accept_terms:!1});X(()=>{if(x.value){const a=x.value;r.full_name=a.name||[a.first_name,a.last_name].filter(Boolean).join(" ")||""}});const _=f(!1),g=f(""),u=f(""),w=f(!1);async function E(){if(k.value)try{await navigator.clipboard.writeText(k.value),w.value=!0,setTimeout(()=>{w.value=!1},2e3)}catch(a){console.error("Failed to copy wallet address",a)}}const U=i(()=>!!r.full_name&&!!v.value&&!!r.payment_method&&r.accept_terms&&N.value>0&&!_.value);async function M(){if(U.value){_.value=!0,g.value="",u.value="";try{const a={full_name:r.full_name,company:r.company,vat_number:r.vat_number,notes:r.notes,payment_method:r.payment_method,accept_terms:r.accept_terms,email:v.value,items:y.value.map(m=>({id:m.id,product_id:m.product_id,qty:m.qty,unit_price:m.price}))},l=await W("/checkout",{method:"POST",body:a});r.payment_method==="paypal"?(u.value=o("checkout.successPaypal")||"Redirecting to PayPal...",l?.paypal_invoice_url?window.location.href=l.paypal_invoice_url:u.value=o("checkout.successPaypalNoUrl")||"Invoice sent to email."):r.payment_method==="usdt"?u.value=o("checkout.successUsdt")||"Order created. Please send USDT proof.":u.value=o("checkout.successTransfer")||"Order created. Transfer details sent."}catch(a){console.error(a),g.value=a?.data?.message||a?.message||o("checkout.error")||"Order failed."}finally{_.value=!1}}}return(a,l)=>{const m=z,F=G;return d(),c("div",le,[e("h1",ne,s(t(o)("checkout.title")||"Checkout"),1),t(N)===0?(d(),c("div",de,[e("p",ce,s(t(o)("checkout.empty")||"Your cart is empty. Add products before checking out."),1),j(m,{to:"/",class:"inline-flex items-center gap-2 rounded-xl border border-gray-300 bg-white px-5 py-2.5 text-sm font-bold text-gray-700 hover:bg-gray-50 hover:text-[#0e5e6f] transition-colors"},{default:D(()=>[h(" ← "+s(t(o)("common.continueShopping")||"Continue shopping"),1)]),_:1})])):(d(),c("div",ie,[e("section",ue,[e("div",me,[e("h2",pe,s(t(o)("checkout.details")||"Billing Details"),1),e("form",{class:"space-y-5",onSubmit:I(M,["prevent"])},[e("div",he,[e("div",null,[e("label",_e,s(t(o)("checkout.fullName")||"Full name"),1),p(e("input",{"onUpdate:modelValue":l[0]||(l[0]=n=>t(r).full_name=n),type:"text",class:"input",required:""},null,512),[[B,t(r).full_name]])]),e("div",null,[e("label",ye,s(t(o)("checkout.email")||"Email"),1),e("input",{value:t(v),type:"email",disabled:"",class:"input bg-gray-50 text-gray-500 cursor-not-allowed border-gray-200"},null,8,be),e("p",ge,s(t(o)("checkout.emailFromAccount")||"Linked to your account."),1)])]),e("div",null,[e("label",fe,s(t(o)("checkout.notes")||"Order notes (optional)"),1),p(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=n=>t(r).notes=n),rows:"3",class:"input resize-none",placeholder:t(o)("checkout.notesPlaceholder")||"Any special instructions…"},null,8,xe),[[B,t(r).notes]])]),e("div",ve,[e("h3",ke,s(t(o)("checkout.paymentMethod")||"Payment Method"),1),e("div",we,[e("label",{class:C(["flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all duration-200",t(r).payment_method==="paypal"?"border-[#3adbc4] bg-[#f0fdfc] shadow-sm":"border-gray-200 hover:border-[#3adbc4]/50 hover:bg-gray-50"])},[p(e("input",{type:"radio",value:"paypal","onUpdate:modelValue":l[2]||(l[2]=n=>t(r).payment_method=n),class:"mt-1 text-[#0e5e6f] focus:ring-[#3adbc4]"},null,512),[[T,t(r).payment_method]]),e("div",Ce,[l[6]||(l[6]=e("div",{class:"mt-0.5 h-9 w-9 rounded-full bg-[#00457C] text-white flex items-center justify-center text-sm font-bold shadow-sm"}," P ",-1)),e("div",null,[e("div",Te,s(t(o)("checkout.methods.paypal.title")||"PayPal"),1),e("div",Se,s(t(o)("checkout.methods.paypal.desc")||"Secure payment via PayPal. Invoice sent to email."),1)])])],2),e("label",{class:C(["flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all duration-200",t(r).payment_method==="usdt"?"border-[#3adbc4] bg-[#f0fdfc] shadow-sm":"border-gray-200 hover:border-[#3adbc4]/50 hover:bg-gray-50"])},[p(e("input",{type:"radio",value:"usdt","onUpdate:modelValue":l[3]||(l[3]=n=>t(r).payment_method=n),class:"mt-1 text-[#0e5e6f] focus:ring-[#3adbc4]"},null,512),[[T,t(r).payment_method]]),e("div",Ae,[l[8]||(l[8]=e("div",{class:"mt-0.5 h-9 w-9 rounded-full bg-emerald-600 text-white flex items-center justify-center text-sm font-bold shadow-sm"}," ₮ ",-1)),e("div",Ne,[e("div",Pe,s(t(o)("checkout.methods.usdt.title")||"USDT Transfer"),1),e("div",Ue,s(t(o)("checkout.methods.usdt.desc")||"Send USDT to our wallet and verify via WhatsApp."),1),t(r).payment_method==="usdt"?(d(),c("div",Me,[e("div",Ve,s(t(o)("checkout.methods.usdt.walletLabel")||"Wallet Address (TRC20)"),1),e("div",je,[e("code",De,s(t(k)||"USDT_WALLET_ADDRESS_MISSING"),1),e("button",{type:"button",class:"inline-flex items-center rounded-md border border-gray-200 bg-white px-2.5 py-1.5 text-xs font-bold hover:bg-gray-50 hover:text-[#0e5e6f] transition-colors",onClick:I(E,["stop"])},[t(w)?(d(),c("span",Ie,[l[7]||(l[7]=e("span",{class:"text-lg"},"✔",-1)),h(" "+s(t(o)("checkout.copied")||"Copied"),1)])):(d(),c("span",Be,s(t(o)("checkout.copy")||"Copy"),1))])]),e("div",Oe,s(t(o)("checkout.methods.usdt.afterPayment")||"After transfer, please send screenshot to WhatsApp support."),1)])):S("",!0)])])],2),e("label",{class:C(["flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all duration-200",t(r).payment_method==="transfer"?"border-[#3adbc4] bg-[#f0fdfc] shadow-sm":"border-gray-200 hover:border-[#3adbc4]/50 hover:bg-gray-50"])},[p(e("input",{type:"radio",value:"transfer","onUpdate:modelValue":l[4]||(l[4]=n=>t(r).payment_method=n),class:"mt-1 text-[#0e5e6f] focus:ring-[#3adbc4]"},null,512),[[T,t(r).payment_method]]),e("div",We,[l[9]||(l[9]=e("div",{class:"mt-0.5 h-9 w-9 rounded-full bg-slate-700 text-white flex items-center justify-center text-sm font-bold shadow-sm"}," $ ",-1)),e("div",null,[e("div",$e,s(t(o)("checkout.methods.transfer.title")||"International Transfer"),1),e("div",Le,s(t(o)("checkout.methods.transfer.desc")||"Western Union or Bank Transfer details sent after order."),1)])])],2)])])],32)])]),e("aside",qe,[e("div",Re,[e("div",Ee,[e("h2",Fe,s(t(o)("checkout.summary")||"Order Summary"),1)]),e("div",ze,[e("ul",Ge,[(d(!0),c(Z,null,ee(t(y),n=>(d(),c("li",{key:R(n),class:"flex items-start justify-between gap-3"},[e("div",He,[n?.image?(d(),oe(F,{key:0,src:n.image,width:"48",height:"48",modifiers:{fit:"cover"},class:"h-12 w-12 rounded-lg border border-gray-100 bg-white object-cover",alt:""},null,8,["src"])):(d(),c("div",Ke,"—"))]),e("div",Ye,[e("div",Je,s(n?.name),1),e("div",Qe,[h(" x"+s(n?.qty)+" · ",1),e("span",Xe,"$"+s(b(n?.price)),1)])]),e("div",Ze," $"+s(b(L(n))),1)]))),128))]),e("div",et,[e("span",tt,s(t(o)("cart.subtotal")||"Subtotal"),1),e("span",st,"$"+s(b(t(P))),1)]),e("div",ot,[e("span",at,s(t(o)("cart.total")||"Total"),1),e("span",rt,"$"+s(b(t(P))),1)]),e("div",lt,[e("label",nt,[p(e("input",{"onUpdate:modelValue":l[5]||(l[5]=n=>t(r).accept_terms=n),type:"checkbox",class:"mt-1 rounded border-gray-300 text-[#0e5e6f] focus:ring-[#3adbc4]"},null,512),[[te,t(r).accept_terms]]),e("span",dt,[h(s(t(o)("checkout.acceptTermsPre")||"I accept the")+" ",1),j(m,{to:"/terms-conditions",target:"_blank",class:"text-[#0e5e6f] underline hover:text-[#3adbc4]"},{default:D(()=>[h(s(t(o)("checkout.acceptTermsLink")||"Terms & Conditions"),1)]),_:1})])]),t(g)?(d(),c("div",ct,s(t(g)),1)):S("",!0),t(u)?(d(),c("div",it,s(t(u)),1)):S("",!0),e("button",{type:"button",class:"btn w-full shadow-md hover:shadow-lg transition-all",disabled:t(_)||!t(U),onClick:M},[t(_)?(d(),c("span",mt,[l[10]||(l[10]=e("svg",{class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),h(" "+s(t(o)("checkout.placing")||"Processing..."),1)])):(d(),c("span",pt,s(t(o)("checkout.placeOrder")||"Complete Order"),1))],8,ut)])])])])]))])}}}),vt=re(ht,[["__scopeId","data-v-93cfe058"]]);export{vt as default};
